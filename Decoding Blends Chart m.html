<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinnacle Reading Advantage</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --primary-dark: #345683;
            --secondary-color: #ff7d54;
            --text-color: #333333;
            --light-bg: #f5f7fa;
            --white: #ffffff;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #4b0082, #6a1b9a); /* Purple gradient background */
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(75, 0, 130, 0.3);
            padding: 30px 20px 35px;
        }
        
        /* White stripe and green inner area */
        header::before {
            content: "";
            position: absolute;
            top: 8px;
            left: 8px;
            right: 8px;
            bottom: 8px;
            background: linear-gradient(135deg, #0d5e20, #1a7531); /* Green gradient */
            border: 3px solid white; /* White stripe */
            border-radius: 10px;
            pointer-events: none;
            z-index: 0;
        }
        
        /* Decorative accent in corner */
        header::after {
            content: "";
            position: absolute;
            bottom: -20px;
            right: -20px;
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            z-index: 0;
            border-radius: 50%;
        }
        
        /* Make sure content is above the background */
        header h1, header p, header div {
            position: relative;
            z-index: 1;
        }

        h1 {
            color: #4b0082; /* Dark purple text */
            margin-bottom: 20px;
            text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.2);
            position: relative;
            display: inline-block;
            padding: 12px 25px;
            border-radius: 10px;
            background: #ffffff; /* White background */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15), 
                        inset 0 0 10px rgba(255, 255, 255, 0.8);
            font-size: 2.5rem;
            letter-spacing: 0.5px;
            transform: perspective(500px) rotateX(5deg);
            border: 2px solid #4b0082; /* Purple border */
        }
        
        /* Add subtle shine effect to heading */
        h1::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to bottom, 
                        rgba(255,255,255,0.7) 0%, 
                        rgba(255,255,255,0) 100%);
            border-radius: 8px 8px 0 0;
            opacity: 0.6;
        }

        /* Tagline styles with staggered animation */
        .tagline {
            color: #ffffff; /* White text */
            font-size: 1.3rem;
            margin-bottom: 0.8rem;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
            position: relative;
            z-index: 1;
            background: rgba(75, 0, 130, 0.8); /* Dark purple background */
            display: block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            padding: 8px 20px;
            border-radius: 50px; /* Rounded pill shape */
            border: 1px solid rgba(255, 255, 255, 0.5); /* Brighter white border */
            transition: all 0.3s ease;
            transform: translateY(0);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
        }
        
        /* Staggered animations for each tagline */
        .tagline:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .tagline:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        .tagline:nth-child(4) {
            animation-delay: 0.6s;
            font-style: italic;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tagline:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            background: rgba(75, 0, 130, 0.9);
        }
        
        /* Add a subtle glow to the third tagline */
        .tagline:nth-child(3) {
            background: linear-gradient(90deg, rgba(75, 0, 130, 0.8), rgba(106, 27, 154, 0.8));
            animation: fadeInUp 0.8s ease forwards, glow 2s ease-in-out infinite alternate;
            animation-delay: 0.4s;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2), 0 0 5px rgba(75, 0, 130, 0.5);
            }
            to {
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2), 0 0 15px rgba(106, 27, 154, 0.8);
            }
        }

        /* Enhanced description section */
        .description {
            max-width: 900px;
            margin: 0 auto 40px auto;
            text-align: center;
            background: linear-gradient(145deg, #ffffff, #f5f7fa);
            padding: 30px 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.07), 
                        0 0 0 1px rgba(0, 0, 0, 0.02);
            position: relative;
            overflow: hidden;
            border-top: 4px solid #4b0082;
        }
        
        .description::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #4b0082, #6a1b9a, #0d5e20, #1a7531);
            opacity: 0.8;
        }
        
        .section-title {
            color: #4b0082;
            font-size: 2.2rem;
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -8px;
            left: 25%;
            width: 50%;
            height: 3px;
            background: linear-gradient(to right, #4b0082, #1a7531);
            border-radius: 3px;
        }
        
        .description p {
            font-size: 1.15rem;
            line-height: 1.6;
            color: #444;
            margin-bottom: 25px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .results-highlight {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .result-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 25px;
            background: rgba(75, 0, 130, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(75, 0, 130, 0.1);
            min-width: 220px;
            transition: all 0.3s ease;
        }
        
        .result-stat:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            background: rgba(75, 0, 130, 0.08);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4b0082;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #4b0082, #1a7531);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-text {
            font-size: 1rem;
            color: #555;
            text-align: center;
        }
        
        /* Enhanced premium banner */
        .premium-banner {
            position: relative;
            max-width: 1200px;
            margin: 0 auto 50px;
            padding: 40px 30px;
            background: linear-gradient(to right, #f9f9ff, #f0f5fa);
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.08);
            text-align: center;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.8);
        }
        
        .banner-glow {
            position: absolute;
            top: -100px;
            left: -100px;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(75, 0, 130, 0.3) 0%, rgba(75, 0, 130, 0) 70%);
            border-radius: 50%;
            z-index: 0;
            animation: movingGlow 10s infinite alternate ease-in-out;
        }
        
        @keyframes movingGlow {
            0% {
                transform: translate(0, 0);
            }
            100% {
                transform: translate(900px, 200px);
            }
        }
        
        .premium-banner h2 {
            font-size: 2.5rem;
            color: #4b0082;
            margin-bottom: 15px;
            text-shadow: 0 2px 3px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
        }
        
        .banner-subtitle {
            font-size: 1.3rem;
            color: #555;
            margin-bottom: 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            z-index: 1;
        }
        
        .premium-features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }
        
        .feature-item {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 30px 25px;
            width: 100%;
            max-width: 300px;
            display: flex;
            align-items: flex-start;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            transition: all 0.4s ease;
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.05);
            overflow: hidden;
            text-align: left;
        }
        
        .feature-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, #4b0082, #6a1b9a);
            opacity: 0.7;
        }
        
        .feature-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            background-color: rgba(255, 255, 255, 0.95);
        }
        
        .feature-icon {
            font-size: 26px;
            margin-right: 20px;
            color: #4b0082;
        }
        
        .icon-circle {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4b0082, #6a1b9a);
            border-radius: 50%;
            color: white;
            box-shadow: 0 5px 15px rgba(75, 0, 130, 0.3);
        }
        
        .feature-text {
            flex: 1;
        }
        
        .feature-text h3 {
            color: #4b0082;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .feature-text p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .feature-tag {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(75, 0, 130, 0.1);
            color: #4b0082;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .cta-container {
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        
        .cta-text {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .premium-subscribe-btn {
            background: linear-gradient(135deg, #4b0082, #6a1b9a);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(75, 0, 130, 0.3);
            font-weight: bold;
        }
        
        .premium-subscribe-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(75, 0, 130, 0.4);
        }
        
        /* Enhanced Charts Showcase Section */
        .charts-showcase {
            background: linear-gradient(135deg, #f0f6ff, #f9f4ff);
            border-radius: 20px;
            padding: 60px 30px;
            margin: 0 auto 40px;
            max-width: 900px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.06);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(75, 0, 130, 0.1);
        }
        
        .charts-showcase::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(circle at 20% 30%, rgba(75, 0, 130, 0.1) 0%, transparent 30%),
                             radial-gradient(circle at 80% 70%, rgba(26, 117, 49, 0.1) 0%, transparent 30%);
            opacity: 0.7;
        }
        
        .showcase-content {
            position: relative;
            z-index: 1;
        }
        
        .showcase-title {
            color: #4b0082;
            font-size: 2.4rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 3px rgba(0,0,0,0.1);
        }
        
        .showcase-description {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
            margin-left: auto;
            margin-right: auto;
        }
        
        .testimonial {
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(75, 0, 130, 0.1);
        }
        
        .quote {
            font-size: 1.1rem;
            font-style: italic;
            color: #333;
            margin-bottom: 15px;
            line-height: 1.5;
            position: relative;
            padding: 0 30px;
        }
        
        .quote::before, 
        .quote::after {
            content: "\201C";
            font-family: Georgia, serif;
            font-size: 3rem;
            position: absolute;
            color: rgba(75, 0, 130, 0.2);
            line-height: 1;
        }
        
        .quote::before {
            left: 0;
            top: -10px;
        }
        
        .quote::after {
            content: "\201D";
            right: 0;
            bottom: -30px;
        }
        
        .quote-author {
            font-size: 0.9rem;
            font-weight: bold;
            color: #444;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .color-square {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .long-vowel {
            background-color: #28a745; /* Green for long vowels (original color) */
        }

        .short-vowel {
            background-color: #dc3545; /* Red for short vowels */
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            background-color: var(--white);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .tab:first-child {
            border-top-left-radius: var(--border-radius);
            border-bottom-left-radius: var(--border-radius);
        }

        .tab:last-child {
            border-top-right-radius: var(--border-radius);
            border-bottom-right-radius: var(--border-radius);
        }

        .tab.active {
            background-color: var(--primary-color);
            color: var(--white);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .chart-container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 30px;
        }

        .chart {
            display: table;
            border-collapse: separate;
            border-spacing: 8px;
            width: 100%;
            table-layout: fixed;
            margin: 0 auto;
        }
        
        .chart-row {
            display: table-row;
        }
        
        .vowel-header {
            display: table-cell;
            text-align: center;
            font-weight: bold;
            font-size: 2rem;
            padding: 8px 0;
        }
        
        .vowel-header.long-vowel {
            color: white;
            background-color: #28a745; /* Green for long vowels (original color) */
            border-radius: 8px;
            padding: 5px;
            margin: 2px;
            min-width: 40px;
        }
        
        .vowel-header.short-vowel {
            color: white;
            background-color: #dc3545; /* Red for short vowels */
            border-radius: 8px;
            padding: 5px;
            margin: 2px;
            min-width: 40px;
        }
        
        .consonant-header {
            display: table-cell;
            text-align: center;
            font-weight: bold;
            padding: 15px;
            vertical-align: middle;
            font-size: 40px;
            min-width: 80px;
            min-height: 80px;
            background: linear-gradient(135deg, #4b0082, #6a1b9a);
            color: white;
            border-radius: 8px;
            margin: 2px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .selector-group {
            margin-bottom: 20px;
        }
        
        .vowel-selector, .consonant-selector {
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .consonant-selector {
            padding-top: 8px;
            border-top: 1px dashed #e0e0e0;
        }

        .vowel-btn, .consonant-btn {
            padding: 8px 12px;
            background-color: var(--white);
            border: 1px solid var(--primary-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: bold;
        }
        
        .consonant-btn {
            background-color: #f8f9fa;
            border-color: #6c757d;
            color: #495057;
        }

        .vowel-btn.long-vowel-btn {
            color: white;
            background-color: #28a745; /* Green for long vowels (original color) */
        }

        .vowel-btn.short-vowel-btn {
            color: white;
            background-color: #dc3545;
        }

        .vowel-btn:hover, .vowel-btn.active, .consonant-btn:hover, .consonant-btn.active {
            background-color: var(--primary-color);
            color: var(--white) !important;
        }

        .blend-cell {
            background-color: #e9f0f9;
            padding: 20px 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-weight: normal;
            font-size: 36px !important; /* Further reduced two-letter font size */
            display: table-cell;
            min-width: 90px;
            min-height: 90px;
            line-height: 1;
        }
        
        /* Specific size for three-letter blends */
        #three-letter-chart .blend-cell {
            font-size: 32px !important; /* Even smaller for three-letter blends */
        }

        .blend-cell:hover {
            background-color: var(--primary-color);
            color: var(--white);
            transform: translateY(-3px);
        }

        .blend-cell.long-vowel-blend .vowel {
            color: inherit; /* Remove green color from vowels in the cells */
        }

        .blend-cell.short-vowel-blend .vowel {
            color: inherit; /* Remove red color from vowels in the cells */
        }

        .practice-section {
            max-width: 800px;
            margin: 40px auto 0;
            text-align: center;
        }

        .practice-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .practice-btn {
            background-color: #28a745; /* Original green color */
            color: var(--white);
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .practice-btn:hover {
            background-color: #218838; /* Original darker green on hover */
            transform: translateY(-2px);
        }
        
        .practice-tip {
            font-size: 14px;
            color: #666;
            font-style: italic;
            margin-bottom: 30px;
        }

        /* Enhanced Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 30px;
            width: 95%;
            max-width: 700px;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            position: relative;
            overflow: hidden;
        }
        
        .premium-modal {
            background: linear-gradient(to bottom, #ffffff, #f9f4ff);
            border: 1px solid rgba(75, 0, 130, 0.1);
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .modal-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #4b0082, #9400d3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(75, 0, 130, 0.2);
        }
        
        .modal-header h2 {
            color: #4b0082;
            font-size: 2.2rem;
            margin-bottom: 15px;
        }
        
        .modal-subtitle {
            color: #666;
            font-size: 1.1rem;
            line-height: 1.5;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .subscription-benefits {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            border: 1px solid rgba(75, 0, 130, 0.1);
        }
        
        .benefit-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .benefit-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #4b0082, #9400d3);
            color: white;
            border-radius: 50%;
            font-size: 0.9rem;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .benefit-text {
            flex: 1;
            font-size: 1rem;
            color: #333;
        }
        
        .guarantee {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding-top: 20px;
            font-style: italic;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            cursor: pointer;
            color: #aaa;
            z-index: 5;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            color: #4b0082;
            transform: rotate(90deg);
        }
        
        /* Enhanced subscription options */
        .subscription-options {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .subscription-option {
            flex: 1;
            min-width: 240px;
            background: white;
            border-radius: 15px;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .subscription-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .subscription-option h3 {
            color: #333;
            font-size: 1.4rem;
            margin-bottom: 10px;
        }
        
        .subscription-option.highlight {
            background: linear-gradient(to bottom, #fcfaff, #ffffff);
            border: 1px solid rgba(75, 0, 130, 0.2);
            transform: scale(1.05);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            z-index: 2;
        }
        
        .subscription-option.highlight:hover {
            transform: scale(1.05) translateY(-5px);
        }
        
        .best-value {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #4b0082, #6a1b9a);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .price {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4b0082;
            margin: 15px 0;
        }
        
        .price span {
            font-size: 1rem;
            color: #666;
            font-weight: normal;
        }
        
        .savings {
            background: rgba(40, 167, 69, 0.1);
            color: #218838;
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .plan-features {
            list-style-type: none;
            padding: 0;
            margin: 20px 0;
            text-align: left;
        }
        
        .plan-features li {
            padding: 8px 0 8px 30px;
            position: relative;
            color: #555;
            font-size: 0.95rem;
        }
        
        .plan-features li:before {
            content: "✓";
            position: absolute;
            left: 5px;
            color: #28a745;
            font-weight: bold;
        }
        
        .subscribe-option-btn {
            background: linear-gradient(135deg, #4b0082, #6a1b9a);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(75, 0, 130, 0.2);
        }
        
        .subscribe-option-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(75, 0, 130, 0.3);
        }
        
        .subscribe-option-btn.popular {
            background: linear-gradient(135deg, #3a0068, #4b0082);
            font-weight: bold;
            padding: 14px 25px;
        }

        .blend-display {
            font-size: 60px;
            font-weight: bold;
            margin: 30px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .blend-display .vowel {
            transition: var(--transition);
        }

        .blend-display.long-vowel-blend .vowel,
        .blend-display.short-vowel-blend .vowel {
            color: inherit; /* Same color as the rest of the text */
            font-weight: bold; /* Just make it bold for emphasis */
        }

        .timer-display {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .counter-display {
            font-size: 20px;
            margin-bottom: 10px;
            color: #6c757d;
            text-align: center;
            font-weight: 500;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
        }

        .control-btn {
            padding: 10px 20px;
            border: 1px solid var(--primary-color);
            background: var(--white);
            color: var(--primary-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .control-btn:hover:not(:disabled) {
            background: var(--primary-color);
            color: var(--white);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .play-btn {
            background: #28a745; /* Original green color */
            color: var(--white);
            border: none;
        }

        .play-btn:hover {
            background: #218838; /* Original darker green on hover */
        }

        .session-settings {
            background-color: #f0f5fa;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .settings-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        /* Goal Progress Styles - Removed */
        
        /* Book Integration Section */
        .book-integration {
            background: linear-gradient(145deg, #f5f9ff, #f0f6ff);
            padding: 60px 30px;
            margin: 0 auto 50px;
            border-radius: 20px;
            max-width: 1200px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(75, 0, 130, 0.1);
        }
        
        .book-integration::before {
            content: "";
            position: absolute;
            top: -100px;
            right: -100px;
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(75, 0, 130, 0.07) 0%, rgba(75, 0, 130, 0) 70%);
            border-radius: 50%;
            z-index: 0;
        }
        
        .book-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .book-image-container {
            flex: 1;
            min-width: 250px;
            display: flex;
            justify-content: center;
        }
        
        .book-image {
            perspective: 1200px;
            width: 200px;
            height: 300px;
        }
        
        .book-cover {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateY(-30deg);
            transition: transform 1s ease;
            box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.2);
        }
        
        .book-image:hover .book-cover {
            transform: rotateY(-15deg);
        }
        
        .book-spine {
            position: absolute;
            width: 40px;
            height: 100%;
            left: -20px;
            background: linear-gradient(to right, #3a0068, #4b0082);
            transform: rotateY(90deg) translateZ(-20px);
            transform-origin: right;
        }
        
        .book-front {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #4b0082, #6a1b9a);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0 5px 5px 0;
            padding: 20px;
            box-sizing: border-box;
            color: white;
            text-align: center;
        }
        
        .book-front::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
            border-radius: 0 5px 5px 0;
        }
        
        .book-front h3 {
            font-size: 1.8rem;
            line-height: 1.3;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            z-index: 1;
        }
        
        .book-details {
            flex: 2;
            min-width: 300px;
        }
        
        .book-details h2 {
            color: #4b0082;
            font-size: 2.2rem;
            margin-bottom: 20px;
            position: relative;
        }
        
        .book-details h2::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(to right, #4b0082, #6a1b9a);
            border-radius: 3px;
        }
        
        .book-description {
            color: #444;
            font-size: 1.15rem;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .book-benefits {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }
        
        .book-benefit {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }
        
        .benefit-check {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #28a745;
            color: white;
            border-radius: 50%;
            font-size: 14px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .book-benefit p {
            margin: 0;
            color: #333;
            font-size: 1.05rem;
            line-height: 1.5;
        }
        
        .highlight-text {
            font-weight: bold;
            color: #4b0082;
            font-style: italic;
            display: inline-block;
            position: relative;
        }
        
        .highlight-text::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -2px;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #4b0082, #28a745);
            border-radius: 2px;
            opacity: 0.7;
        }
        
        .book-cta {
            margin-top: 30px;
        }
        
        .book-cta p {
            color: #666;
            margin-bottom: 15px;
            font-size: 1rem;
        }
        
        .amazon-button {
            display: inline-block;
            background: linear-gradient(to bottom, #f7dfa5, #f0c14b);
            border: 1px solid #a88734;
            border-radius: 3px;
            padding: 10px 20px;
            color: #111;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .amazon-button:hover {
            background: linear-gradient(to bottom, #f5d78e, #eeb933);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        /* Premium Content Styles */
        .premium-banner {
            background: linear-gradient(135deg, #f0f5fa, #ffffff);
            border-radius: var(--border-radius);
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: var(--box-shadow), 0 0 20px rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }
        
        /* Add subtle curved white highlight to premium banner */
        .premium-banner::before {
            content: "";
            position: absolute;
            top: -30px;
            left: -10%;
            width: 120%;
            height: 60px;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(2deg);
            z-index: 1;
        }
        
        .premium-banner h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 2rem;
        }
        
        .premium-banner p {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .premium-features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .feature-item {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 20px;
            width: 100%;
            max-width: 280px;
            display: flex;
            align-items: flex-start;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05), 0 0 15px rgba(255, 255, 255, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.8);
        }
        
        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1), 0 0 30px rgba(255, 255, 255, 0.8);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--primary-color);
        }
        
        .feature-text h3 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .feature-text p {
            font-size: 0.9rem;
            margin: 0;
            text-align: left;
        }
        
        .premium-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .premium-btn, .premium-subscribe-btn {
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .premium-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
        }
        
        .premium-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .premium-subscribe-btn {
            background-color: #1a7531; /* Darker green (two shades darker) */
            color: white;
            border: none;
        }
        
        .premium-subscribe-btn:hover {
            background-color: #145c27; /* Even darker green on hover */
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        /* Settings button and modal */
        .settings-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            background-color: #1a7531; /* Darker green (two shades darker) */
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .settings-button:hover {
            background-color: #145c27; /* Even darker green on hover */
            transform: translateY(-2px);
        }
        
        #settings-modal .modal-content {
            max-width: 500px;
        }
        
        .voice-selector {
            margin-top: 20px;
        }
        
        .voice-selector select {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background-color: white;
            font-size: 16px;
            margin-top: 8px;
        }
        
        .voice-selector label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .settings-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }
        
        .test-voice-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .save-settings-btn {
            background-color: #1a7531; /* Darker green (two shades darker) */
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        /* Subscription Modal Styles */
        .subscription-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        
        .subscription-option {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            width: 100%;
            max-width: 240px;
            text-align: center;
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .subscription-option:hover {
            transform: scale(1.03);
        }
        
        .subscription-option h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .price {
            font-size: 2rem;
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 20px;
        }
        
        .price span {
            font-size: 1rem;
            font-weight: normal;
            color: #666;
        }
        
        .savings {
            color: #28a745; /* Original green color */
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .subscribe-option-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .subscribe-option-btn:hover {
            background-color: var(--primary-dark);
        }
        
        .subscription-option.highlight {
            border: 2px solid #28a745; /* Original green color */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .best-value {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #28a745; /* Original green color */
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .settings-row {
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .settings-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-group label {
            font-weight: bold;
        }

        .settings-group select, .settings-group input {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .info {
            margin-top: 20px;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            font-size: 12px;
            font-weight: bold;
            border: 2px solid #28a745; /* Original green color */
            text-align: center;
        }
        
        /* Decoding Blends Charts Button Styles */
        .magic-charts-button-container {
            display: flex;
            justify-content: center;
            margin: 40px 0;
        }
        
        .magic-charts-btn {
            background: linear-gradient(135deg, #4b0082, #8a2be2);
            color: white;
            font-size: 28px;
            font-weight: bold;
            font-family: 'Arial', sans-serif;
            padding: 20px 50px;
            border: 3px solid gold;
            border-radius: 50px; /* Makes it an oval shape */
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(75, 0, 130, 0.4),
                        inset 0 0 10px rgba(255, 255, 255, 0.3);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 1;
        }
        
        .magic-charts-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(75, 0, 130, 0.5),
                        inset 0 0 15px rgba(255, 255, 255, 0.4);
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
            border-color: #ffdf3f;
        }
        
        .magic-charts-btn:active {
            transform: translateY(0);
            box-shadow: 0 5px 15px rgba(75, 0, 130, 0.4);
        }
        
        /* Add ornate decorative elements */
        .magic-charts-btn:before,
        .magic-charts-btn:after {
            content: "✦";
            position: absolute;
            font-size: 22px;
            color: gold;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .magic-charts-btn:before {
            left: 20px;
        }
        
        .magic-charts-btn:after {
            right: 20px;
        }
        
        /* Add glow effect */
        .magic-charts-btn {
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            0% {
                box-shadow: 0 4px 15px rgba(75, 0, 130, 0.4),
                            inset 0 0 10px rgba(255, 255, 255, 0.3),
                            0 0 5px rgba(138, 43, 226, 0.5);
            }
            100% {
                box-shadow: 0 4px 15px rgba(75, 0, 130, 0.4),
                            inset 0 0 10px rgba(255, 255, 255, 0.3),
                            0 0 20px rgba(138, 43, 226, 0.8);
            }
        }
        
        /* Add subtle shimmer effect */
        .magic-charts-btn span {
            position: relative;
            z-index: 2;
        }
        
        .magic-charts-btn::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            transition: all 0.8s ease;
            z-index: 1;
        }
        
        .magic-charts-btn:hover::before {
            transform: rotate(30deg) translate(10%, 10%);
            opacity: 0.7;
        }
        
        /* Pulse animation for attention */
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(75, 0, 130, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 4px 20px rgba(75, 0, 130, 0.6);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(75, 0, 130, 0.4);
            }
        }
        
        .magic-charts-btn.pulse {
            animation: pulse 0.8s ease-in-out 3;
        }
        
        .practice-tip kbd {
            display: inline-block;
            padding: 3px 8px;
            font-size: 16px;
            line-height: 1.4;
            color: #fff;
            background-color: #28a745; /* Original green color for KBD */
            border: 1px solid #218838;
            border-radius: 3px;
            box-shadow: 0 2px 0 rgba(0,0,0,0.2);
            margin: 0 3px;
        }
        
        .info kbd {
            display: inline-block;
            padding: 1px 4px;
            font-size: 11px;
            line-height: 1.4;
            color: #fff;
            background-color: #28a745; /* Original green color for KBD */
            border: 1px solid #218838;
            border-radius: 3px;
            box-shadow: 0 1px 0 rgba(0,0,0,0.1);
            margin: 0 2px;
        }
        
        .practice-tip {
            margin: 20px auto;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #28a745; /* Original green color for border */
            text-align: center;
            max-width: 90%;
        }

        @media (max-width: 768px) {
            .chart {
                width: 100%;
                border-spacing: 3px;
            }
            
            .vowel-header {
                font-size: 1.5rem;
                padding: 5px 0;
            }
            
            .blend-cell {
                font-size: 28px !important; /* Further reduced font size for mobile */
                padding: 15px 10px;
                min-width: 60px;
            }
            
            #three-letter-chart .blend-cell {
                font-size: 24px !important; /* Even smaller for three-letter blends on mobile */
            }
            
            .modal-content {
                margin: 20% auto;
                padding: 20px;
            }
            
            .blend-display {
                font-size: 48px;
            }
            
            .vowel-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .settings-row {
                flex-direction: column;
            }
        }

        /* Chart preview styles removed as requested */
        
        /* Styles for new benefit buttons and content */
        .benefits-toggle {
            width: 80%;
            max-width: 800px;
            padding: 14px 25px;
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
            background: linear-gradient(135deg, #4b0082, #6a1b9a);
            color: white;
            border: 2px solid #fff;
            border-radius: 50px; /* Very rounded for oblong shape */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 20px auto; /* Center the button */
            position: relative;
        }
        
        .benefits-toggle::after {
            content: "→";
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            transition: transform 0.3s ease;
            background: rgba(255,255,255,0.2);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .benefits-toggle.active::after {
            transform: translateY(-50%) rotate(90deg);
            background: rgba(255,255,255,0.4);
        }
        
        .benefits-toggle:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, #5b1092, #7a2ba9);
            border-color: #ffcc00;
        }
        
        .benefits-content {
            padding: 20px 30px 35px;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin: 0 auto 30px;
            max-width: 900px;
            border: 1px solid rgba(75, 0, 130, 0.2);
        }
        
        .benefit-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            padding: 20px 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .benefit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }
        
        .benefit-card h4 {
            color: #4b0082;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }
        
        .benefit-card p {
            font-size: 1.05rem;
            line-height: 1.6;
            color: #444;
        }
        
        .benefit-conclusion {
            background: rgba(75, 0, 130, 0.05);
            padding: 15px 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }
        
        .benefit-conclusion p {
            font-size: 1.1rem;
            color: #4b0082;
            font-weight: 500;
        }
        
        .benefit-conclusion strong {
            color: #6a1b9a;
            font-weight: 700;
        }
        
        .navigation-list {
            margin-left: 25px;
            margin-bottom: 15px;
        }
        
        .numbered-list {
            margin-left: 25px;
            margin-bottom: 15px;
            counter-reset: item;
        }
        
        .numbered-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        /* Flash mode styles */
        #flash-mode {
            margin-right: 5px;
        }
        
        #flash-mode:checked + span {
            color: #4a6fa5;
            font-weight: bold;
        }
        
        /* Flash button active state */
        .flash-active #blend-display {
            animation: flashDisplay 0.3s ease-in-out;
        }
        
        @keyframes flashDisplay {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Pinnacle Reading Advantage</h1>
        <p class="tagline">The Most Effective Learning to Read Program Ever Created</p>
        <p class="tagline">Featuring the Amazing Decoding Blends Charts</p>
        <p class="tagline">"Words Have No Where to Hide!"</p>
        <div id="status-display" style="font-size: 14px; color: #fff; margin-top: 10px;"></div>
    </header>

    <div class="description">
        <div class="description-content">
            <h2 class="section-title">Transform Reading Skills</h2>
            <p>Our premium program helps students unlock the mystery of multisyllabic words through innovative phonetic learning. With our intuitive system of color-coded vowels and interactive practice, students rapidly gain confidence and develop reading fluency that lasts a lifetime.</p>
            <div class="results-highlight">
                <div class="result-stat">
                    <span class="stat-number">96%</span>
                    <span class="stat-text">of students show improvement within 4 weeks</span>
                </div>
                <div class="result-stat">
                    <span class="stat-number">5x</span>
                    <span class="stat-text">faster mastery of complex words</span>
                </div>
            </div>
        </div>
    </div>

    <div class="premium-banner">
        <div class="banner-glow"></div>
        <h2>Premium Phonetic Charts</h2>
        <p class="banner-subtitle">Unlock the powerful tools that make learning to read multisyllabic words simpler than ever before</p>
        
        <div class="premium-features">
            <div class="feature-item">
                <div class="feature-icon"><span class="icon-circle">📊</span></div>
                <div class="feature-text">
                    <h3>Interactive Decoding Blends Charts</h3>
                    <p>Color-coded vowel charts for both two-letter and three-letter blends with instant visual feedback</p>
                    <span class="feature-tag">Exclusive</span>
                </div>
            </div>
            
            <div class="feature-item">
                <div class="feature-icon"><span class="icon-circle">🔊</span></div>
                <div class="feature-text">
                    <h3>Perfect Pronunciation</h3>
                    <p>Crystal-clear audio guidance for every blend with just one click - hear it, repeat it, master it</p>
                    <span class="feature-tag">Advanced</span>
                </div>
            </div>
            
            <div class="feature-item">
                <div class="feature-icon"><span class="icon-circle">🏆</span></div>
                <div class="feature-text">
                    <h3>Personalized Practice</h3>
                    <p>Track progress with customizable practice sessions and a focused learning experience</p>
                    <span class="feature-tag">Smart</span>
                </div>
            </div>
        </div>
        
        <!-- Call to action -->
        <div class="cta-container">
            <p class="cta-text">Join thousands of students who have transformed their reading skills</p>
            <div class="premium-buttons">
                <button id="subscribe-btn" class="premium-subscribe-btn" style="display: none;">Subscribe for Premium Access</button>
            </div>
        </div>
    </div>



    <!-- Benefit Toggle Buttons -->
    <button id="benefits-button" class="benefits-toggle">Who Can Take Advantage of This Powerful System?</button>
    <div id="benefits-content" class="benefits-content" style="display: none;">
        <h3>Transform Reading Skills at Any Age</h3>
        
        <div class="benefit-card">
            <h4>🌟 Early Readers</h4>
            <p>Build a strong foundation with clear, consistent phonetic pronunciations that help develop confidence from the start. Our systematic approach helps young minds grasp reading fundamentals faster and more effectively than traditional methods.</p>
        </div>
        
        <div class="benefit-card">
            <h4>🚀 Struggling Older Students</h4>
            <p>For those who "fell through the cracks," our dignified, self-paced system provides a stigma-free way to strengthen essential reading skills. Students can practice privately and progress at their own pace, rebuilding confidence while mastering critical phonetic patterns.</p>
        </div>
        
        <div class="benefit-card">
            <h4>🌍 English Language Learners</h4>
            <p>Master the notoriously challenging aspects of English pronunciation with this powerful interactive tool. The clear audio guidance and consistent patterns help non-native speakers decode the complexities of English phonetics, accelerating language acquisition.</p>
        </div>
        
        <div class="benefit-card">
            <h4>💪 Students with Learning Differences</h4>
            <p>Our system provides the consistent, predictable sound patterns that are especially valuable for students with dyslexia and other learning differences. The multisensory approach helps develop stronger neural pathways for reading success.</p>
        </div>
        
        <div class="benefit-card">
            <h4>🔄 Adult Literacy Programs</h4>
            <p>Empower adults who missed educational opportunities earlier in life. Our respectful, adult-oriented approach provides the building blocks needed to develop reading fluency at any age, opening doors to better employment and lifelong learning.</p>
        </div>
        
        <div class="benefit-conclusion">
            <p>The Pinnacle Reading Advantage is designed for <strong>anyone who wants to improve their reading</strong>, regardless of age or background.</p>
        </div>
    </div>

    <button id="effectiveness-button" class="benefits-toggle">Why Are Decoding Blends Charts So Unusually Effective?</button>
    <div id="effectiveness-content" class="benefits-content" style="display: none;">
        <h3>The Science Behind Our Revolutionary Approach</h3>
        
        <div class="benefit-card">
            <h4>🧩 Complete Coverage of English Phonetics</h4>
            <p>When you practice just a few rows from each of our Decoding Blends Charts, you're practicing the essential phonetic building blocks for nearly <strong>every word in the English language</strong>. By mastering these consonant-vowel blends, you're training your brain to recognize and decode the patterns that appear in all multisyllabic words.</p>
            <p>For example, breaking words into syllables like "prac-tice," "con-so-nant," and "ex-treme-ly" reveals that each non-vowel-initial syllable comes directly from our Two-Letter or Three-Letter Charts. This is why mastering these charts is so devastatingly effective for reading improvement!</p>
        </div>
        
        <div class="benefit-card">
            <h4>🔄 Progressive Learning Methodology</h4>
            <p>Our system is based on decades of research in cognitive science and literacy development. By focusing on the phonetic components of words rather than memorization, we help readers develop the neural pathways needed for automatic decoding skills.</p>
        </div>
        
        <div class="benefit-card">
            <h4>🎯 Consistent Pattern Recognition</h4>
            <p>English may seem unpredictable, but 85% of words follow regular phonetic patterns. Our color-coded system helps students visually distinguish between long and short vowel sounds, making these patterns immediately recognizable and accelerating the learning process.</p>
        </div>
        
        <div class="benefit-conclusion">
            <p>Our users typically experience <strong>dramatic improvements in reading fluency</strong> within just 4-6 weeks of consistent practice.</p>
        </div>
    </div>

    <button id="navigation-button" class="benefits-toggle">How to Navigate the Decoding Blends Charts</button>
    <div id="navigation-content" class="benefits-content" style="display: none;">
        <h3>Master the Interactive Features of Our Decoding Blends Charts</h3>
        
        <div class="benefit-card">
            <h4>🧭 Chart Selection & Organization</h4>
            <p>When you open the Decoding Blends Charts, you'll see tabs at the top to select either the <strong>Two-Letter Chart</strong> or <strong>Three-Letter Chart</strong>. Each chart is organized with vowel buttons at the top and consonant buttons along the side.</p>
            <ul class="navigation-list">
                <li>Press a <strong>vowel button</strong> to display a vertical column with that vowel paired with all consonants</li>
                <li>Press a <strong>consonant button</strong> to display a horizontal row with that consonant paired with all vowels</li>
                <li>Hold <strong>SHIFT key</strong> while selecting to choose multiple vowels or consonants at once</li>
            </ul>
        </div>
        
        <div class="benefit-card">
            <h4>👆 Interactive Chart Features</h4>
            <p>The chart provides a comprehensive view of all possible consonant-vowel combinations. Interact directly with the chart to enhance learning:</p>
            <ul class="navigation-list">
                <li><strong>Hover</strong> over any blend to highlight it</li>
                <li><strong>Click</strong> on any blend to hear its correct pronunciation</li>
            </ul>
        </div>
        
        <div class="benefit-card">
            <h4>⚙️ Practice Session Features</h4>
            <p>Below the charts, you'll find three practice option buttons: <strong>Practice Selected Vowels</strong>, <strong>Practice Selected Consonants</strong>, or <strong>Practice Entire Chart</strong>.</p>
            <p>The Practice Session module offers powerful customization options:</p>
            <ul class="navigation-list">
                <li><strong>Mode:</strong> Choose between sequential or random order for blend presentation</li>
                <li><strong>Timer:</strong> Set how many seconds to display each blend before audio plays</li>
                <li><strong>Flash:</strong> Enable rapid display of blends for advanced practice</li>
                <li><strong>Progress:</strong> Track your blend practice sessions with a built-in counter that shows how many blends you've practiced in your current session</li>
            </ul>
        </div>
        
        <div class="benefit-card">
            <h4>⌨️ Keyboard Shortcuts</h4>
            <p>Speed up your practice sessions with these convenient keyboard shortcuts:</p>
            <ul class="navigation-list">
                <li><strong>Space Bar:</strong> Advance to the next blend</li>
                <li><strong>P key:</strong> Play the audio pronunciation of the current blend</li>
                <li><strong>R key:</strong> Replay the current audio</li>
            </ul>
            <p>When you're finished, click the <strong>Finish Practice</strong> button or use the <strong>X</strong> in the top-right corner to exit the practice module.</p>
        </div>
        
        <div class="benefit-conclusion">
            <p>Experiment with different features to find the <strong>learning approach that works best for you</strong>!</p>
        </div>
    </div>

    <button id="maximum-benefit-button" class="benefits-toggle">How to Use Decoding Blends Charts for Maximum Benefit</button>
    <div id="maximum-benefit-content" class="benefits-content" style="display: none;">
        <h3>Unlock the Full Power of Phonetic Learning</h3>
        
        <div class="benefit-card">
            <h4>🔑 Prerequisites for Success</h4>
            <p>Before beginning with the Decoding Blends Charts, ensure your student has mastered:</p>
            <ul class="navigation-list">
                <li><strong>Letter sounds</strong> – focusing on the pure essence of each sound (e.g., "t" not "tuh")</li>
                <li><strong>Long and short vowel sounds</strong> – understanding the difference between ā/ă, ē/ĕ, etc.</li>
            </ul>
        </div>
        
        <div class="benefit-card">
            <h4>📈 Step-by-Step Learning Path</h4>
            <p>Follow this structured approach to systematically master the Decoding Blends Charts:</p>
            <ol class="numbered-list">
                <li><strong>Begin with a single column</strong> – Start with the Two-Letter Chart's Long A column. Practice blending consonants with this vowel, working from top to bottom.</li>
                <li><strong>Use sequential practice</strong> – In Practice mode, set it to Sequential with a 4-second timer for beginners.</li>
                <li><strong>Progress through mastery levels</strong> – Move from Sequential → Random → Flash modes as skills improve.</li>
                <li><strong>Add complexity gradually</strong> – Move to the Three-Letter Chart only after mastering several Two-Letter columns.</li>
            </ol>
        </div>
        
        <div class="benefit-card">
            <h4>🔄 Expansion Strategy</h4>
            <p>After mastering one column or row, expand your practice systematically:</p>
            <ul class="navigation-list">
                <li>Add a second vowel column (e.g., Long E after mastering Long A)</li>
                <li>Practice consonant rows using the same progression (Sequential → Random → Flash)</li>
                <li>Gradually increase complexity by practicing with multiple selections at once</li>
            </ul>
        </div>
        
        <div class="benefit-card">
            <h4>🎯 Measuring Success</h4>
            <p>Clear benchmarks help track progress toward mastery:</p>
            <ul class="navigation-list">
                <li><strong>Single column/row mastery:</strong> Flash mode, twenty consecutive blends in a row, no mistakes</li>
                <li><strong>Combined columns/rows:</strong> Flash mode, twenty consecutive blends in a row, no mistakes</li>
                <li><strong>Full chart mastery:</strong> Flash mode, twenty consecutive blends in a row, no mistakes</li>
            </ul>
        </div>
        
        <div class="benefit-conclusion">
            <p>Just <strong>15 minutes of daily practice</strong> yields remarkable results in reading fluency and confidence!</p>
        </div>
    </div>

    <!-- Premium Content (Hidden by Default) -->
    <div id="premium-content" style="display: none;">
        <!-- Decoding Blends Charts Button Section -->
        <div class="charts-showcase">
            <div class="showcase-content">
                <h2 class="showcase-title">Experience the Magic</h2>
                <p class="showcase-description">Our unique approach to phonetic learning makes complex words easy to master. Click below to reveal the interactive charts that have helped thousands of students improve their reading skills.</p>
                <!-- Decoding Blends Charts Button -->
                <div class="magic-charts-button-container">
                    <button id="magic-charts-btn" class="magic-charts-btn"><span>Decoding Blends Charts</span></button>
                </div>
                <div class="testimonial">
                    <p class="quote">"The Decoding Blends Charts transformed my teaching approach completely. My students are now confident readers!"</p>
                    <p class="quote-author">— Maria T., Elementary Teacher</p>
                </div>
            </div>
        </div>
        
        <!-- Charts Area (Hidden Until Button Click) -->
        <div id="charts-area" style="display: none;">
            <div class="legend">
                <div class="legend-item">
                    <div class="color-square long-vowel"></div>
                    <span>Long Vowels (ā, ē, ī, ō, ū)</span>
                </div>
                <div class="legend-item">
                    <div class="color-square short-vowel"></div>
                    <span>Short Vowels (ă, ĕ, ĭ, ŏ, ŭ)</span>
                </div>
            </div>

            <div class="tabs">
                <div class="tab active" data-tab="two-letter">Two-Letter Chart</div>
                <div class="tab" data-tab="three-letter">Three-Letter Chart</div>
            </div>

            <div class="tab-content active" id="two-letter-content">
                <div class="chart-container">
                    <div class="chart-header">
                        <h2>Two-Letter Blends</h2>
                    </div>
                    
                    <div class="selector-group">
                        <div class="vowel-selector" id="two-letter-vowels">
                            <!-- Vowel selector buttons will be added here by JavaScript -->
                        </div>
                        
                        <div class="consonant-selector" id="two-letter-consonants">
                            <!-- Consonant selector buttons will be added here by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="chart" id="two-letter-chart"></div>
                </div>
            </div>

            <div class="tab-content" id="three-letter-content">
                <div class="chart-container">
                    <div class="chart-header">
                        <h2>Three-Letter Blends</h2>
                    </div>
                    
                    <div class="selector-group">
                        <div class="vowel-selector" id="three-letter-vowels">
                            <!-- Vowel selector buttons will be added here by JavaScript -->
                        </div>
                        
                        <div class="consonant-selector" id="three-letter-consonants">
                            <!-- Consonant selector buttons will be added here by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="chart" id="three-letter-chart"></div>
                </div>
            </div>

            <div class="practice-section">
                <div class="practice-options">
                    <button class="practice-btn" id="practice-row-btn">Practice Selected Vowels</button>
                    <button class="practice-btn" id="practice-consonants-btn">Practice Selected Consonant Rows</button>
                    <button class="practice-btn" id="practice-chart-btn">Practice Entire Chart</button>
                </div>
                <div class="practice-tip">
                    <p>⌨️ SELECTION TIP ⌨️</p>
                    <p>Hold <kbd>SHIFT</kbd> while clicking vowels or consonants to select multiple items for practice</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Subscribe Modal -->
    <div class="modal" id="subscribe-modal">
        <div class="modal-content premium-modal">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <div class="modal-icon">✨</div>
                <h2>Unlock Premium Access</h2>
                <p class="modal-subtitle">Get full access to our complete collection of phonetic charts, audio tools, and personalized practice modes.</p>
            </div>
            
            <div class="subscription-benefits">
                <div class="benefit-item">
                    <div class="benefit-icon">✓</div>
                    <div class="benefit-text">Unlimited access to all Decoding Blends Charts</div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">✓</div>
                    <div class="benefit-text">Premium audio pronunciation guides</div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">✓</div>
                    <div class="benefit-text">Customizable practice sessions</div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">✓</div>
                    <div class="benefit-text">Advanced session-based progress tracking</div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">✓</div>
                    <div class="benefit-text">Classroom usage rights (1 teacher + 30 students)</div>
                </div>
            </div>
            
            <div class="subscription-options">
                <div class="subscription-option">
                    <h3>Monthly Access</h3>
                    <div class="price">$9.99<span>/month</span></div>
                    <ul class="plan-features">
                        <li>No long-term commitment</li>
                        <li>Cancel anytime</li>
                        <li>All premium features</li>
                    </ul>
                    <button class="subscribe-option-btn" data-plan="monthly">Get Started</button>
                </div>
                
                <div class="subscription-option highlight">
                    <div class="best-value">Best Value</div>
                    <h3>Annual Access</h3>
                    <div class="price">$89.99<span>/year</span></div>
                    <div class="savings">Save 25%</div>
                    <ul class="plan-features">
                        <li>Best value option</li>
                        <li>Full year of access</li>
                        <li>All premium features</li>
                    </ul>
                    <button class="subscribe-option-btn popular" data-plan="annual">Select Annual Plan</button>
                </div>
            </div>
            
            <div class="guarantee">
                <p>30-day money-back guarantee. No questions asked.</p>
            </div>
        </div>
    </div>

    <!-- Practice Modal -->
    <div class="modal" id="practice-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Practice Session</h2>
            
            <div class="session-settings">
                <div class="settings-row">
                    <div class="settings-group">
                        <label for="practice-mode">Mode:</label>
                        <select id="practice-mode">
                            <option value="sequential">Sequential Order</option>
                            <option value="random">Random Order</option>
                        </select>
                    </div>
                    <div class="settings-group">
                        <label for="timer-setting">Timer (seconds):</label>
                        <input type="number" id="timer-setting" min="1" max="10" value="4">
                    </div>
                    <div class="settings-group">
                        <label for="flash-mode">
                            <input type="checkbox" id="flash-mode">
                            Flash Mode (300ms)
                        </label>
                    </div>
                    <div class="settings-group">
                        <label for="ultra-flash-mode">
                            <input type="checkbox" id="ultra-flash-mode">
                            Ultra Flash Mode (200ms)
                        </label>
                    </div>
                </div>
                <!-- Goal feature removed -->
            </div>
            
            <div class="timer-display" id="timer-display"></div>
            <div class="counter-display" id="counter-display">Blends practiced: 0</div>
            <div class="blend-display" id="blend-display"></div>
            
            <div class="controls">
                <button class="control-btn" id="prev-btn" disabled>Previous</button>
                <button class="control-btn play-btn" id="play-btn">Play Sound</button>
                <button class="control-btn" id="next-btn">Next</button>
            </div>
            
            <div class="info">
                <p>⌨️ KEYBOARD SHORTCUTS ⌨️</p>
                <p>Press <kbd>SPACEBAR</kbd> to advance to the next blend<br>
                Press <span style="font-weight: 900; font-size: 14px;">P</span> key to play the current blend's sound</p>
            </div>
            
            <div style="text-align: center; margin-top: 1.5rem;">
                <button class="control-btn" id="finish-practice-btn">Finish Practice</button>
            </div>
        </div>
    </div>

    <script>
        // Chart data for two and three letter blends
        const chartData = {
            twoLetter: {
                consonants: ['b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'r', 's', 't', 'v', 'w', 'y', 'z'],
                vowels: [
                    { symbol: 'ā', type: 'long', example: 'cake' },
                    { symbol: 'ē', type: 'long', example: 'bee' },
                    { symbol: 'ī', type: 'long', example: 'kite' },
                    { symbol: 'ō', type: 'long', example: 'boat' },
                    { symbol: 'ū', type: 'long', example: 'cube' },
                    { symbol: 'ă', type: 'short', example: 'cat' },
                    { symbol: 'ĕ', type: 'short', example: 'bed' },
                    { symbol: 'ĭ', type: 'short', example: 'sit' },
                    { symbol: 'ŏ', type: 'short', example: 'pot' },
                    { symbol: 'ŭ', type: 'short', example: 'cup' }
                ]
            },
            threeLetter: {
                onsets: ['bl', 'cl', 'fl', 'gl', 'sl', 'pl', 'tw', 'qu', 'br', 'cr', 'dr', 'fr', 'gr', 'pr', 'tr', 'ch', 'sh', 'sc', 'sm', 'sn', 'st', 'sw', 'th', 'wh', 'ph'],
                vowels: [
                    { symbol: 'ā', type: 'long', example: 'cake' },
                    { symbol: 'ē', type: 'long', example: 'bee' },
                    { symbol: 'ī', type: 'long', example: 'kite' },
                    { symbol: 'ō', type: 'long', example: 'boat' },
                    { symbol: 'ū', type: 'long', example: 'cube' },
                    { symbol: 'ă', type: 'short', example: 'cat' },
                    { symbol: 'ĕ', type: 'short', example: 'bed' },
                    { symbol: 'ĭ', type: 'short', example: 'sit' },
                    { symbol: 'ŏ', type: 'short', example: 'pot' },
                    { symbol: 'ŭ', type: 'short', example: 'cup' }
                ]
            }
        };

        // Current practice state
        let practiceState = {
            currentChartType: 'two-letter',
            currentVowel: null,
            currentConsonants: null,
            practicingVowelRow: false,
            practicingConsonantColumn: false,
            blends: [],
            currentIndex: 0,
            timerValue: 4,
            timerInterval: null,
            isPlaying: false,
            practiceCount: 0,
            flashMode: false,
            ultraFlashMode: false,
            flashTimer: null
        };
        
        // Create a simple bell sound for goal achievement (more browser compatible)
        function playAchievementSound() {
            // Use the Web Audio API which has better browser compatibility
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                // Connect the oscillator to a gain node (volume control)
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Set up a cheerful "ta-da" sound (frequency changes)
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4
                oscillator.frequency.exponentialRampToValueAtTime(880, audioContext.currentTime + 0.1); // A5
                oscillator.frequency.exponentialRampToValueAtTime(587.33, audioContext.currentTime + 0.2); // D5
                oscillator.frequency.exponentialRampToValueAtTime(659.26, audioContext.currentTime + 0.3); // E5
                oscillator.frequency.exponentialRampToValueAtTime(880, audioContext.currentTime + 0.4); // Back to A5
                
                // Volume envelope - start at zero, ramp up quickly, then fade out
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.8, audioContext.currentTime + 0.05);
                gainNode.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 0.2);
                gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.6);
                
                // Start and stop the sound
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.6);
                
                console.log('Web Audio API success sound played');
                
                // Create a second oscillator for harmony
                const oscillator2 = audioContext.createOscillator();
                oscillator2.connect(gainNode);
                oscillator2.type = 'sine';
                oscillator2.frequency.setValueAtTime(220, audioContext.currentTime); // A3
                oscillator2.frequency.exponentialRampToValueAtTime(440, audioContext.currentTime + 0.1); // A4
                oscillator2.frequency.exponentialRampToValueAtTime(293.66, audioContext.currentTime + 0.2); // D4
                oscillator2.frequency.exponentialRampToValueAtTime(329.63, audioContext.currentTime + 0.3); // E4
                oscillator2.frequency.exponentialRampToValueAtTime(440, audioContext.currentTime + 0.4); // Back to A4
                
                oscillator2.start(audioContext.currentTime);
                oscillator2.stop(audioContext.currentTime + 0.6);
                
                return true;
            } catch (e) {
                console.error('Web Audio API failed:', e);
                
                // Fallback to the simple Audio API
                try {
                    // Create a simple beep sound using the Audio API
                    const beep = new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU9vT18AAAAA//////////////////////////////////////////8=");
                    beep.volume = 1.0;
                    beep.play();
                    console.log('Fallback audio played');
                    return true;
                } catch (e2) {
                    console.error('Fallback audio failed:', e2);
                    return false;
                }
            }
        }

        // Initialize the application
        // Flag to track premium status (simulated) - set to true for demo
        let isPremiumUser = true;
        
        document.addEventListener('DOMContentLoaded', function() {
            // Show premium content by default for testing
            document.getElementById('premium-content').style.display = 'block';
            
            // Goal feature removed
            
            // Setup vowel selectors
            setupVowelSelectors();
            
            // Generate the charts
            generateTwoLetterChart();
            generateThreeLetterChart();
            
            // Set up tab switching
            setupTabs();
            
            // Set up practice session
            setupPractice();
            
            // Set up keyboard controls
            setupKeyboardControls();
            
            // Setup premium access functionality
            setupPremiumAccess();
        });
        
        // Setup premium access buttons and modals
        function setupPremiumAccess() {
            // Get premium elements
            const subscribeBtn = document.getElementById('subscribe-btn');
            const subscribeBtnTwoLetter = document.getElementById('subscribe-btn-2l');
            const subscribeBtnThreeLetter = document.getElementById('subscribe-btn-3l');
            const premiumContent = document.getElementById('premium-content');
            const subscribeModal = document.getElementById('subscribe-modal');
            const closeSubscribeModal = subscribeModal.querySelector('.close-modal');
            const subscribePlanBtns = document.querySelectorAll('.subscribe-option-btn');
            
            // Subscribe button for main CTA
            subscribeBtn.addEventListener('click', function() {
                showSubscribeModal();
            });
            
            // Subscribe button for two-letter preview
            subscribeBtnTwoLetter.addEventListener('click', function() {
                showSubscribeModal();
            });
            
            // Subscribe button for three-letter preview
            subscribeBtnThreeLetter.addEventListener('click', function() {
                showSubscribeModal();
            });
            
            // Close subscribe modal
            closeSubscribeModal.addEventListener('click', function() {
                subscribeModal.style.display = 'none';
            });
            
            // Handle subscription plan selection
            subscribePlanBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const plan = this.dataset.plan;
                    // Simulate successful subscription
                    isPremiumUser = true;
                    subscribeModal.style.display = 'none';
                    
                    // Show success message
                    alert(`Thank you for subscribing to the ${plan} plan! You now have premium access.`);
                    
                    // Show premium content
                    premiumContent.style.display = 'block';
                    window.scrollTo({ top: premiumContent.offsetTop, behavior: 'smooth' });
                    
                    // Update UI to reflect premium status
                    document.querySelectorAll('.blur-overlay').forEach(overlay => {
                        overlay.style.display = 'none';
                    });
                    subscribeBtn.style.display = 'none';
                    
                    // Make sure to actually display the premium content - this is important
                    premiumContent.style.display = 'block';
                    
                    // Scroll to it so it's visible
                    setTimeout(() => {
                        window.scrollTo({ top: premiumContent.offsetTop, behavior: 'smooth' });
                    }, 500);
                });
            });
            
            // Function to show subscribe modal
            function showSubscribeModal() {
                subscribeModal.style.display = 'block';
            }
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === subscribeModal) {
                    subscribeModal.style.display = 'none';
                }
            });
        }

        // Set up vowel and consonant selectors
        function setupVowelSelectors() {
            const twoLetterVowelsContainer = document.getElementById('two-letter-vowels');
            const threeLetterVowelsContainer = document.getElementById('three-letter-vowels');
            const twoLetterConsonantsContainer = document.getElementById('two-letter-consonants');
            const threeLetterConsonantsContainer = document.getElementById('three-letter-consonants');
            
            // Clear existing content
            twoLetterVowelsContainer.innerHTML = '';
            threeLetterVowelsContainer.innerHTML = '';
            twoLetterConsonantsContainer.innerHTML = '';
            threeLetterConsonantsContainer.innerHTML = '';
            
            // Create buttons for two-letter vowels
            chartData.twoLetter.vowels.forEach(vowel => {
                const button = document.createElement('button');
                button.className = `vowel-btn ${vowel.type}-vowel-btn`;
                button.textContent = vowel.symbol.toUpperCase();
                button.dataset.vowel = vowel.symbol;
                button.dataset.type = vowel.type;
                button.title = `${vowel.symbol} as in "${vowel.example}"`;
                
                button.addEventListener('click', function(event) {
                    // If shift key is pressed, allow multiple selection
                    if (!event.shiftKey) {
                        // Remove active class from all vowel buttons (single selection mode)
                        document.querySelectorAll('#two-letter-vowels .vowel-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });
                    }
                    
                    // Toggle active class on clicked button
                    this.classList.toggle('active');
                    
                    // Get all selected vowels
                    const selectedVowels = [];
                    document.querySelectorAll('#two-letter-vowels .vowel-btn.active').forEach(btn => {
                        if (btn.dataset.vowel) {
                            selectedVowels.push(btn.dataset.vowel);
                        }
                    });
                    
                    // Filter chart based on selected vowels
                    filterChart('two-letter', selectedVowels.length > 0 ? selectedVowels : null);
                });
                
                twoLetterVowelsContainer.appendChild(button);
            });
            
            // Create buttons for three-letter vowels
            chartData.threeLetter.vowels.forEach(vowel => {
                const button = document.createElement('button');
                button.className = `vowel-btn ${vowel.type}-vowel-btn`;
                button.textContent = vowel.symbol.toUpperCase();
                button.dataset.vowel = vowel.symbol;
                button.dataset.type = vowel.type;
                button.title = `${vowel.symbol} as in "${vowel.example}"`;
                
                button.addEventListener('click', function(event) {
                    // If shift key is pressed, allow multiple selection
                    if (!event.shiftKey) {
                        // Remove active class from all vowel buttons (single selection mode)
                        document.querySelectorAll('#three-letter-vowels .vowel-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });
                    }
                    
                    // Toggle active class on clicked button
                    this.classList.toggle('active');
                    
                    // Get all selected vowels
                    const selectedVowels = [];
                    document.querySelectorAll('#three-letter-vowels .vowel-btn.active').forEach(btn => {
                        if (btn.dataset.vowel) {
                            selectedVowels.push(btn.dataset.vowel);
                        }
                    });
                    
                    // Filter chart based on selected vowels
                    filterChart('three-letter', selectedVowels.length > 0 ? selectedVowels : null);
                });
                
                threeLetterVowelsContainer.appendChild(button);
            });
            
            // Add "All Vowels" button for two-letter chart
            const allTwoLetterButton = document.createElement('button');
            allTwoLetterButton.className = 'vowel-btn';
            allTwoLetterButton.textContent = 'All Vowels';
            allTwoLetterButton.addEventListener('click', function() {
                document.querySelectorAll('#two-letter-vowels .vowel-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                filterChart('two-letter', null);
            });
            twoLetterVowelsContainer.appendChild(allTwoLetterButton);
            allTwoLetterButton.classList.add('active');
            
            // Add "All Vowels" button for three-letter chart
            const allThreeLetterButton = document.createElement('button');
            allThreeLetterButton.className = 'vowel-btn';
            allThreeLetterButton.textContent = 'All Vowels';
            allThreeLetterButton.addEventListener('click', function() {
                document.querySelectorAll('#three-letter-vowels .vowel-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                filterChart('three-letter', null);
            });
            threeLetterVowelsContainer.appendChild(allThreeLetterButton);
            allThreeLetterButton.classList.add('active');
            
            // Create consonant buttons for two-letter chart
            chartData.twoLetter.consonants.forEach(consonant => {
                const button = document.createElement('button');
                button.className = 'consonant-btn';
                button.textContent = consonant.toUpperCase();
                button.dataset.consonant = consonant;
                
                button.addEventListener('click', function(event) {
                    // If shift key is pressed, allow multiple selection
                    if (!event.shiftKey) {
                        // Remove active class from all consonant buttons (single selection mode)
                        document.querySelectorAll('#two-letter-consonants .consonant-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });
                    }
                    
                    // Toggle active class on clicked button
                    this.classList.toggle('active');
                    
                    // Get all selected consonants
                    const selectedConsonants = [];
                    document.querySelectorAll('#two-letter-consonants .consonant-btn.active').forEach(btn => {
                        if (btn.dataset.consonant) {
                            selectedConsonants.push(btn.dataset.consonant);
                        }
                    });
                    
                    // Filter chart based on selected consonants
                    filterChartByConsonants('two-letter', selectedConsonants.length > 0 ? selectedConsonants : null);
                });
                
                twoLetterConsonantsContainer.appendChild(button);
            });
            
            // Add "All Consonants" button for two-letter chart
            const allTwoLetterConsonantsButton = document.createElement('button');
            allTwoLetterConsonantsButton.className = 'consonant-btn';
            allTwoLetterConsonantsButton.textContent = 'All Consonants';
            allTwoLetterConsonantsButton.addEventListener('click', function() {
                document.querySelectorAll('#two-letter-consonants .consonant-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                filterChartByConsonants('two-letter', null);
            });
            twoLetterConsonantsContainer.appendChild(allTwoLetterConsonantsButton);
            allTwoLetterConsonantsButton.classList.add('active');
            
            // Create consonant buttons for three-letter chart
            chartData.threeLetter.onsets.forEach(onset => {
                const button = document.createElement('button');
                button.className = 'consonant-btn';
                button.textContent = onset.toUpperCase();
                button.dataset.consonant = onset;
                
                button.addEventListener('click', function(event) {
                    // If shift key is pressed, allow multiple selection
                    if (!event.shiftKey) {
                        // Remove active class from all consonant buttons (single selection mode)
                        document.querySelectorAll('#three-letter-consonants .consonant-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });
                    }
                    
                    // Toggle active class on clicked button
                    this.classList.toggle('active');
                    
                    // Get all selected consonants
                    const selectedConsonants = [];
                    document.querySelectorAll('#three-letter-consonants .consonant-btn.active').forEach(btn => {
                        if (btn.dataset.consonant) {
                            selectedConsonants.push(btn.dataset.consonant);
                        }
                    });
                    
                    // Filter chart based on selected consonants
                    filterChartByConsonants('three-letter', selectedConsonants.length > 0 ? selectedConsonants : null);
                });
                
                threeLetterConsonantsContainer.appendChild(button);
            });
            
            // Add "All Consonant Blends" button for three-letter chart
            const allThreeLetterConsonantsButton = document.createElement('button');
            allThreeLetterConsonantsButton.className = 'consonant-btn';
            allThreeLetterConsonantsButton.textContent = 'All Consonant Blends';
            allThreeLetterConsonantsButton.addEventListener('click', function() {
                document.querySelectorAll('#three-letter-consonants .consonant-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                filterChartByConsonants('three-letter', null);
            });
            threeLetterConsonantsContainer.appendChild(allThreeLetterConsonantsButton);
            allThreeLetterConsonantsButton.classList.add('active');
        }

        // Filter chart to show only blends with selected vowels
        function filterChart(chartType, vowels) {
            const chartElement = document.getElementById(`${chartType}-chart`);
            const blendCells = chartElement.querySelectorAll('.blend-cell');
            
            blendCells.forEach(cell => {
                if (!vowels || // If no vowels specified, show all
                    (Array.isArray(vowels) && vowels.includes(cell.dataset.vowel)) || // If cell's vowel is in the array
                    vowels === cell.dataset.vowel) { // For backward compatibility
                    cell.style.display = 'table-cell';
                } else {
                    cell.style.display = 'none';
                }
            });
            
            // Update practice state
            practiceState.currentChartType = chartType;
            practiceState.currentVowel = vowels; // Note: This now might be an array
        }
        
        // Filter chart to show only blends with selected consonants
        function filterChartByConsonants(chartType, consonants) {
            const chartElement = document.getElementById(`${chartType}-chart`);
            const chartRows = chartElement.querySelectorAll('.chart-row');
            
            // Skip the header row (index 0)
            for (let i = 1; i < chartRows.length; i++) {
                const row = chartRows[i];
                const consonantHeader = row.querySelector('.consonant-header');
                const rowConsonant = consonantHeader.textContent;
                
                if (!consonants || // If no consonants specified, show all
                    (Array.isArray(consonants) && consonants.includes(rowConsonant)) || // If row's consonant is in the array
                    consonants === rowConsonant) { // For backward compatibility
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            }
            
            // Update practice state for consonants
            practiceState.currentConsonants = consonants; // This might be an array
        }

        // Generate two-letter chart
        function generateTwoLetterChart() {
            const chartElement = document.getElementById('two-letter-chart');
            chartElement.innerHTML = '';
            
            // Create header row with vowels
            const headerRow = document.createElement('div');
            headerRow.className = 'chart-row';
            
            // Add empty cell for top-left corner
            const cornerCell = document.createElement('div');
            cornerCell.className = 'consonant-header';
            headerRow.appendChild(cornerCell);
            
            // Add vowel headers
            chartData.twoLetter.vowels.forEach(vowel => {
                const headerCell = document.createElement('div');
                headerCell.className = `vowel-header ${vowel.type}-vowel`;
                headerCell.textContent = vowel.symbol.toUpperCase();
                headerCell.title = `${vowel.symbol} as in "${vowel.example}"`;
                headerRow.appendChild(headerCell);
            });
            
            chartElement.appendChild(headerRow);
            
            // Create rows for each consonant
            chartData.twoLetter.consonants.forEach(consonant => {
                const row = document.createElement('div');
                row.className = 'chart-row';
                
                // Add consonant header as first cell in row
                const consonantHeader = document.createElement('div');
                consonantHeader.className = 'consonant-header';
                consonantHeader.textContent = consonant;
                row.appendChild(consonantHeader);
                
                // Add blend cells for each vowel
                chartData.twoLetter.vowels.forEach(vowel => {
                    // Create the blend cell
                    const cell = document.createElement('div');
                    cell.className = `blend-cell ${vowel.type}-vowel-blend`;
                    cell.style.fontSize = "40px";
                    cell.style.padding = "15px";
                    cell.style.minWidth = "80px";
                    cell.style.minHeight = "80px";
                    
                    // Create the blend text without colored vowel
                    cell.innerHTML = `${consonant}${vowel.symbol}`;
                    
                    // Store the full blend with diacritical mark for audio
                    cell.dataset.blend = consonant + vowel.symbol;
                    cell.dataset.vowel = vowel.symbol;
                    cell.dataset.consonant = consonant;
                    
                    // Add click event for audio with special handling
                    cell.addEventListener('click', function() {
                        // Get the consonant and vowel for special handling
                        const consonantValue = this.dataset.consonant;
                        const vowelSymbol = this.dataset.vowel;
                        
                        // Special handling for problematic blends
                        if (vowelSymbol === 'ē') {
                            if (consonantValue === 'j') {
                                console.log("*** DIRECT: Playing 'jee' sound ***");
                                speakDirectText('jee');
                                return;
                            }
                            if (consonantValue === 'n') {
                                console.log("*** DIRECT: Playing 'nee' sound ***");
                                speakDirectText('nee');
                                return;
                            }
                        }
                        
                        // Regular processing for other blends
                        playBlendAudio(this.dataset.blend);
                    });
                    
                    row.appendChild(cell);
                });
                
                chartElement.appendChild(row);
            });
        }

        // Generate three-letter chart
        function generateThreeLetterChart() {
            const chartElement = document.getElementById('three-letter-chart');
            chartElement.innerHTML = '';
            
            // Create header row with vowels
            const headerRow = document.createElement('div');
            headerRow.className = 'chart-row';
            
            // Add empty cell for top-left corner
            const cornerCell = document.createElement('div');
            cornerCell.className = 'consonant-header';
            headerRow.appendChild(cornerCell);
            
            // Add vowel headers
            chartData.threeLetter.vowels.forEach(vowel => {
                const headerCell = document.createElement('div');
                headerCell.className = `vowel-header ${vowel.type}-vowel`;
                headerCell.textContent = vowel.symbol.toUpperCase();
                headerCell.title = `${vowel.symbol} as in "${vowel.example}"`;
                headerRow.appendChild(headerCell);
            });
            
            chartElement.appendChild(headerRow);
            
            // Create rows for each onset
            chartData.threeLetter.onsets.forEach(onset => {
                const row = document.createElement('div');
                row.className = 'chart-row';
                
                // Add onset header as first cell in row
                const onsetHeader = document.createElement('div');
                onsetHeader.className = 'consonant-header';
                onsetHeader.textContent = onset;
                row.appendChild(onsetHeader);
                
                // Add blend cells for each vowel
                chartData.threeLetter.vowels.forEach(vowel => {
                    // Create the blend cell
                    const cell = document.createElement('div');
                    cell.className = `blend-cell ${vowel.type}-vowel-blend`;
                    cell.style.fontSize = "40px";
                    cell.style.padding = "15px";
                    cell.style.minWidth = "80px";
                    cell.style.minHeight = "80px";
                    
                    // Create the blend text without colored vowel
                    cell.innerHTML = `${onset}${vowel.symbol}`;
                    
                    // Store the full blend with diacritical mark for audio
                    cell.dataset.blend = onset + vowel.symbol;
                    cell.dataset.vowel = vowel.symbol;
                    cell.dataset.onset = onset;
                    
                    // Add click event for audio with special handling
                    cell.addEventListener('click', function() {
                        // Get the onset and vowel for special handling
                        const onsetValue = this.dataset.onset;
                        const vowelSymbol = this.dataset.vowel;
                        const fullBlend = this.dataset.blend;
                        
                        // Special direct word replacements for three-letter blends as requested
                        
                        // Long O replacements
                        if (fullBlend === 'twō') {
                            console.log("*** DIRECT: Playing 'toe' for twō ***");
                            speakDirectText('toe');
                            return;
                        }
                        
                        // Long U replacements
                        if (fullBlend === 'twū') {
                            console.log("*** DIRECT: Playing 'two' for twū ***");
                            speakDirectText('two');
                            return;
                        }
                        
                        // Short A replacements
                        if (fullBlend === 'twă') {
                            console.log("*** DIRECT: Playing 'twac' for twă ***");
                            speakDirectText('twac');
                            return;
                        }
                        if (fullBlend === 'blă') {
                            console.log("*** DIRECT: Playing 'bla' for blă ***");
                            speakDirectText('bla');
                            return;
                        }
                        if (fullBlend === 'clă') {
                            console.log("*** DIRECT: Playing 'cla' for clă with trick ***");
                            
                            // Use a trick with a manufactured word "clat" - browsers often 
                            // spell out short non-words but pronounce words correctly
                            const utterance = new SpeechSynthesisUtterance("clat");
                            utterance.rate = 0.9;  // Slightly slower for clarity
                            utterance.lang = 'en-US';
                            
                            // Cancel any existing speech
                            window.speechSynthesis.cancel();
                            
                            // Display what we're doing
                            document.getElementById('status-display').innerText = `Pronouncing: cla`;
                            
                            // Use the standard voice selection to match other sounds
                            const voices = window.speechSynthesis.getVoices();
                            if (voices.length > 0) {
                                // Apply the same voice selection logic used elsewhere
                                setVoiceAndSpeak(utterance, voices, 'clă', 'clat');
                            } else {
                                // If no voices available yet, just speak with default
                                window.speechSynthesis.speak(utterance);
                            }
                            
                            return;
                        }
                        
                        // Add handlers for other stubborn short 'ă' blends
                        if (fullBlend === 'slă') {
                            console.log("*** DIRECT: Playing 'sla' for slă with trick ***");
                            const utterance = new SpeechSynthesisUtterance("slat");
                            utterance.rate = 0.9;
                            utterance.lang = 'en-US';
                            window.speechSynthesis.cancel();
                            document.getElementById('status-display').innerText = `Pronouncing: sla`;
                            window.speechSynthesis.speak(utterance);
                            return;
                        }
                        
                        if (fullBlend === 'bră') {
                            console.log("*** DIRECT: Playing 'bra' for bră with trick ***");
                            const utterance = new SpeechSynthesisUtterance("brat");
                            utterance.rate = 0.9;
                            utterance.lang = 'en-US';
                            window.speechSynthesis.cancel();
                            document.getElementById('status-display').innerText = `Pronouncing: bra`;
                            window.speechSynthesis.speak(utterance);
                            return;
                        }
                        
                        if (fullBlend === 'shă') {
                            console.log("*** DIRECT: Playing 'sha' for shă with trick ***");
                            const utterance = new SpeechSynthesisUtterance("shat");
                            utterance.rate = 0.9;
                            utterance.lang = 'en-US';
                            window.speechSynthesis.cancel();
                            document.getElementById('status-display').innerText = `Pronouncing: sha`;
                            window.speechSynthesis.speak(utterance);
                            return;
                        }
                        
                        if (fullBlend === 'jă') {
                            console.log("*** DIRECT: Playing 'ja' for jă with trick ***");
                            const utterance = new SpeechSynthesisUtterance("jat");
                            utterance.rate = 0.9;
                            utterance.lang = 'en-US';
                            window.speechSynthesis.cancel();
                            document.getElementById('status-display').innerText = `Pronouncing: ja`;
                            window.speechSynthesis.speak(utterance);
                            return;
                        }
                        
                        if (fullBlend === 'wă') {
                            console.log("*** DIRECT: Playing 'wa' for wă with trick ***");
                            const utterance = new SpeechSynthesisUtterance("wat");
                            utterance.rate = 0.9;
                            utterance.lang = 'en-US';
                            window.speechSynthesis.cancel();
                            document.getElementById('status-display').innerText = `Pronouncing: wa`;
                            window.speechSynthesis.speak(utterance);
                            return;
                        }
                        
                        // Short E replacements
                        if (fullBlend === 'twĕ') {
                            console.log("*** DIRECT: Playing 'tweck' for twĕ ***");
                            speakDirectText('tweck');
                            return;
                        }
                        if (fullBlend === 'phĕ') {
                            console.log("*** DIRECT: Playing 'fetch' for phĕ ***");
                            speakDirectText('fetch');
                            return;
                        }
                        if (fullBlend === 'quĕ') {
                            console.log("*** DIRECT: Playing 'quest' for quĕ ***");
                            speakDirectText('quest');
                            return;
                        }
                        if (fullBlend === 'clĕ') {
                            console.log("*** DIRECT: Playing 'clep' for clĕ ***");
                            speakDirectText('clep');
                            return;
                        }
                        if (fullBlend === 'grĕ') {
                            console.log("*** DIRECT: Playing 'greb' for grĕ ***");
                            speakDirectText('greb');
                            return;
                        }
                        
                        // Short I replacements
                        if (fullBlend === 'glĭ') {
                            console.log("*** DIRECT: Playing 'glib' for glĭ ***");
                            speakDirectText('glib');
                            return;
                        }
                        if (fullBlend === 'frĭ') {
                            console.log("*** DIRECT: Playing 'frit' for frĭ ***");
                            speakDirectText('frit');
                            return;
                        }
                        
                        // Short O replacements
                        if (fullBlend === 'chŏ') {
                            console.log("*** DIRECT: Playing 'chop' for chŏ ***");
                            speakDirectText('chop');
                            return;
                        }
                        if (fullBlend === 'smŏ') {
                            console.log("*** DIRECT: Playing 'smock' for smŏ ***");
                            speakDirectText('smock');
                            return;
                        }
                        if (fullBlend === 'twŏ') {
                            console.log("*** DIRECT: Playing 'twock' for twŏ ***");
                            speakDirectText('twock');
                            return;
                        }
                        
                        // Short U replacements
                        if (fullBlend === 'snŭ') {
                            console.log("*** DIRECT: Playing 'snub' for snŭ ***");
                            speakDirectText('snub');
                            return;
                        }
                        if (fullBlend === 'whŭ') {
                            console.log("*** DIRECT: Playing 'what' for whŭ ***");
                            speakDirectText('what');
                            return;
                        }
                        if (fullBlend === 'shŭ') {
                            console.log("*** DIRECT: Playing 'shut' for shŭ ***");
                            speakDirectText('shut');
                            return;
                        }
                        
                        // Special handling for problematic blends
                        if (vowelSymbol === 'ē') {
                            if (onsetValue === 'j') {
                                console.log("*** DIRECT: Playing 'jee' sound ***");
                                speakDirectText('jee');
                                return;
                            }
                            if (onsetValue === 'n') {
                                console.log("*** DIRECT: Playing 'nee' sound ***");
                                speakDirectText('nee');
                                return;
                            }
                        }
                        
                        // Regular processing for other blends
                        playBlendAudio(this.dataset.blend);
                    });
                    
                    row.appendChild(cell);
                });
                
                chartElement.appendChild(row);
            });
        }

        // Set up tab switching
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Hide all tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Show corresponding tab content
                    const tabId = this.dataset.tab + '-content';
                    document.getElementById(tabId).classList.add('active');
                    
                    // Update practice state
                    practiceState.currentChartType = this.dataset.tab;
                    practiceState.currentVowel = null;
                    
                    // Reset active vowel button
                    document.querySelectorAll(`#${practiceState.currentChartType}-vowels .vowel-btn`).forEach(btn => {
                        btn.classList.remove('active');
                    });
                    document.querySelector(`#${practiceState.currentChartType}-vowels .vowel-btn:last-child`).classList.add('active');
                    
                    // Show all blends
                    filterChart(practiceState.currentChartType, null);
                });
            });
        }

        // Set up practice session
        function setupPractice() {
            const practiceRowBtn = document.getElementById('practice-row-btn');
            const practiceConsonantsBtn = document.getElementById('practice-consonants-btn');
            const practiceChartBtn = document.getElementById('practice-chart-btn');
            const modal = document.getElementById('practice-modal');
            const closeModal = document.querySelector('#practice-modal .close-modal');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const playBtn = document.getElementById('play-btn');
            const practiceModeSelect = document.getElementById('practice-mode');
            const timerSetting = document.getElementById('timer-setting');
            const practiceGoalInput = document.getElementById('practice-goal');
            
            // Practice vowel row button
            practiceRowBtn.addEventListener('click', function() {
                const activeTab = document.querySelector('.tab.active').dataset.tab;
                const activeVowels = document.querySelectorAll(`#${activeTab}-vowels .vowel-btn.active`);
                
                // Get selected vowels that have vowel data
                const selectedVowels = [];
                activeVowels.forEach(btn => {
                    if (btn.dataset.vowel && btn.textContent !== 'All Vowels') {
                        selectedVowels.push(btn.dataset.vowel);
                    }
                });
                
                if (selectedVowels.length === 0) {
                    alert('Please select at least one specific vowel to practice.');
                    return;
                }
                
                practiceState.currentChartType = activeTab;
                practiceState.currentVowel = selectedVowels.length === 1 ? selectedVowels[0] : selectedVowels;
                practiceState.currentConsonants = null; // Reset consonant selection
                practiceState.practicingVowelRow = true;
                practiceState.practicingConsonantColumn = false;
                
                // Goal feature removed
                
                preparePracticeSession();
                modal.style.display = 'block';
            });
            
            // Practice consonant columns button
            practiceConsonantsBtn.addEventListener('click', function() {
                const activeTab = document.querySelector('.tab.active').dataset.tab;
                // Update button text based on active tab
                if (activeTab === 'three-letter') {
                    this.textContent = 'Practice Selected Consonant Blends';
                } else {
                    this.textContent = 'Practice Selected Consonant Rows';
                }
                
                const activeConsonants = document.querySelectorAll(`#${activeTab}-consonants .consonant-btn.active`);
                
                // Get selected consonants
                const selectedConsonants = [];
                activeConsonants.forEach(btn => {
                    if (btn.dataset.consonant && 
                        btn.textContent !== 'All Consonants' &&
                        btn.textContent !== 'All Consonant Blends') {
                        selectedConsonants.push(btn.dataset.consonant);
                    }
                });
                
                if (selectedConsonants.length === 0) {
                    // Different message based on chart type
                    if (activeTab === 'three-letter') {
                        alert('Please select at least one specific consonant blend to practice.');
                    } else {
                        alert('Please select at least one specific consonant to practice.');
                    }
                    return;
                }
                
                practiceState.currentChartType = activeTab;
                practiceState.currentVowel = null; // Reset vowel selection
                practiceState.currentConsonants = selectedConsonants.length === 1 ? selectedConsonants[0] : selectedConsonants;
                practiceState.practicingVowelRow = false;
                practiceState.practicingConsonantColumn = true;
                
                // Goal feature removed
                
                preparePracticeSession();
                modal.style.display = 'block';
            });
            
            // Practice entire chart button
            practiceChartBtn.addEventListener('click', function() {
                const activeTab = document.querySelector('.tab.active').dataset.tab;
                
                practiceState.currentChartType = activeTab;
                practiceState.currentVowel = null;
                practiceState.currentConsonants = null;
                practiceState.practicingVowelRow = false;
                practiceState.practicingConsonantColumn = false;
                
                // Goal feature removed
                
                preparePracticeSession();
                modal.style.display = 'block';
            });
            
            // Close modal
            closeModal.addEventListener('click', function() {
                stopPracticeSession();
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    stopPracticeSession();
                    modal.style.display = 'none';
                }
            });
            
            // Previous button
            prevBtn.addEventListener('click', function() {
                navigateBlends('prev');
            });
            
            // Next button
            nextBtn.addEventListener('click', function() {
                navigateBlends('next');
            });
            
            // Play sound button - when user explicitly requests audio
            playBtn.addEventListener('click', function() {
                const currentBlend = practiceState.blends[practiceState.currentIndex];
                playBlendAudio(currentBlend);
            });
            
            // Finish practice button
            document.getElementById('finish-practice-btn').addEventListener('click', function() {
                stopPracticeSession();
                modal.style.display = 'none';
            });
            
            // Practice mode change
            practiceModeSelect.addEventListener('change', function() {
                preparePracticeSession();
            });
            
            // Timer setting change
            timerSetting.addEventListener('change', function() {
                practiceState.timerValue = parseInt(this.value, 10);
                if (practiceState.isPlaying) {
                    stopTimer();
                    startTimer();
                }
            });
            
            // Flash mode toggle
            const flashModeCheckbox = document.getElementById('flash-mode');
            const ultraFlashModeCheckbox = document.getElementById('ultra-flash-mode');
            
            flashModeCheckbox.addEventListener('change', function() {
                practiceState.flashMode = this.checked;
                if (this.checked) {
                    // Disable Ultra Flash mode when Flash mode is enabled
                    ultraFlashModeCheckbox.checked = false;
                    practiceState.ultraFlashMode = false;
                }
                updateFlashModeState();
            });
            
            ultraFlashModeCheckbox.addEventListener('change', function() {
                practiceState.ultraFlashMode = this.checked;
                if (this.checked) {
                    // Disable Flash mode when Ultra Flash mode is enabled
                    flashModeCheckbox.checked = false;
                    practiceState.flashMode = false;
                }
                updateFlashModeState();
            });
            
            function updateFlashModeState() {
                const practiceContainer = document.querySelector('.practice-container');
                if (practiceState.flashMode || practiceState.ultraFlashMode) {
                    practiceContainer.classList.add('flash-active');
                } else {
                    practiceContainer.classList.remove('flash-active');
                    // Clear any existing flash timer
                    if (practiceState.flashTimer) {
                        clearTimeout(practiceState.flashTimer);
                        practiceState.flashTimer = null;
                    }
                }
            }
            
            // Goal setting change - removed
        }

        // Set up keyboard controls
        function setupKeyboardControls() {
            document.addEventListener('keydown', function(event) {
                // Only work if the practice modal is open
                if (document.getElementById('practice-modal').style.display !== 'block') {
                    return;
                }
                
                // Escape key to close the modal
                if (event.code === 'Escape') {
                    event.preventDefault();
                    stopPracticeSession();
                    document.getElementById('practice-modal').style.display = 'none';
                    return;
                }
                
                // Space key to advance to next blend
                if (event.code === 'Space') {
                    event.preventDefault();
                    if (practiceState.currentIndex < practiceState.blends.length - 1) {
                        navigateBlends('next');
                    }
                }
                
                // P key to play sound
                if (event.code === 'KeyP') {
                    event.preventDefault();
                    const currentBlend = practiceState.blends[practiceState.currentIndex];
                    playBlendAudio(currentBlend);
                }
                
                // Left arrow for previous
                if (event.code === 'ArrowLeft' && practiceState.currentIndex > 0) {
                    navigateBlends('prev');
                }
                
                // Right arrow for next
                if (event.code === 'ArrowRight' && practiceState.currentIndex < practiceState.blends.length - 1) {
                    navigateBlends('next');
                }
            });
        }

        // Prepare practice session
        function preparePracticeSession() {
            // Stop any existing timer
            stopPracticeSession();
            
            // Reset state
            practiceState.blends = [];
            practiceState.currentIndex = 0;
            practiceState.timerValue = parseInt(document.getElementById('timer-setting').value, 10);
            practiceState.isPlaying = true;
            practiceState.practiceCount = 0;
            
            // Initialize counter display
            const counterDisplay = document.getElementById('counter-display');
            if (counterDisplay) {
                counterDisplay.textContent = 'Blends practiced: 0';
            }
            
            const chartType = practiceState.currentChartType;
            const practiceMode = document.getElementById('practice-mode').value;
            
            // Get selected vowels
            let selectedVowels = [];
            
            // If we're practicing specific vowels (could be multiple)
            if (practiceState.currentVowel) {
                if (Array.isArray(practiceState.currentVowel)) {
                    // Multiple vowels selected
                    selectedVowels = practiceState.currentVowel;
                } else {
                    // Single vowel selected
                    selectedVowels = [practiceState.currentVowel];
                }
            } else {
                // No specific vowels selected, use all vowels
                if (chartType === 'two-letter') {
                    chartData.twoLetter.vowels.forEach(vowel => {
                        selectedVowels.push(vowel.symbol);
                    });
                } else {
                    chartData.threeLetter.vowels.forEach(vowel => {
                        selectedVowels.push(vowel.symbol);
                    });
                }
            }
            
            // Get selected consonants if we're practicing consonant columns
            let selectedConsonants = [];
            
            if (practiceState.practicingConsonantColumn && practiceState.currentConsonants) {
                if (Array.isArray(practiceState.currentConsonants)) {
                    // Multiple consonants selected
                    selectedConsonants = practiceState.currentConsonants;
                } else {
                    // Single consonant selected
                    selectedConsonants = [practiceState.currentConsonants];
                }
            } else {
                // No specific consonants selected, use all consonants
                if (chartType === 'two-letter') {
                    selectedConsonants = chartData.twoLetter.consonants;
                } else {
                    selectedConsonants = chartData.threeLetter.onsets;
                }
            }
            
            // Generate blends based on selected vowels and consonants
            if (chartType === 'two-letter') {
                selectedConsonants.forEach(consonant => {
                    selectedVowels.forEach(vowel => {
                        practiceState.blends.push(consonant + vowel);
                    });
                });
            } else { // three-letter
                selectedConsonants.forEach(onset => {
                    selectedVowels.forEach(vowel => {
                        practiceState.blends.push(onset + vowel);
                    });
                });
            }
            
            // Shuffle the blends if random mode is selected
            if (practiceMode === 'random') {
                shuffleArray(practiceState.blends);
            }
            
            // Display the first blend
            updateBlendDisplay();
            
            // Start the timer
            startTimer();
            
            // Enable/disable navigation buttons
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('next-btn').disabled = practiceState.blends.length <= 1;
        }

        // Update the blend display
        function updateBlendDisplay(playAudio = false) {
            const blendDisplay = document.getElementById('blend-display');
            blendDisplay.innerHTML = '';
            
            if (practiceState.blends.length === 0) {
                blendDisplay.textContent = 'No blends to practice';
                return;
            }
            
            const currentBlend = practiceState.blends[practiceState.currentIndex];
            
            // Determine vowel type (long or short)
            let vowelType = 'long';
            
            // Get the vowel from the blend
            const vowel = currentBlend.match(/[āēīōūăĕĭŏŭ]/);
            
            if (vowel) {
                const vowelChar = vowel[0];
                
                // Check if it's a short vowel (has breve accent)
                if (['ă', 'ĕ', 'ĭ', 'ŏ', 'ŭ'].includes(vowelChar)) {
                    vowelType = 'short';
                }
                
                // Update the blend display
                blendDisplay.className = `blend-display ${vowelType}-vowel-blend`;
                
                // Split the blend to highlight the vowel
                const parts = currentBlend.split(vowelChar);
                
                // Consonant part
                const consonantPart = document.createTextNode(parts[0]);
                blendDisplay.appendChild(consonantPart);
                
                // Vowel part
                const vowelSpan = document.createElement('span');
                vowelSpan.className = 'vowel';
                vowelSpan.textContent = vowelChar;
                blendDisplay.appendChild(vowelSpan);
                
                // Rest of the blend (if any)
                if (parts.length > 1 && parts[1]) {
                    const restPart = document.createTextNode(parts[1]);
                    blendDisplay.appendChild(restPart);
                }
            } else {
                // Fallback if no vowel is found
                blendDisplay.textContent = currentBlend;
            }
            
            // Only play audio if explicitly requested
            if (playAudio) {
                playBlendAudio(currentBlend);
            }
            
            // Implement Flash mode functionality
            if (practiceState.flashMode || practiceState.ultraFlashMode) {
                // Clear any existing flash timers
                if (practiceState.flashTimer) {
                    clearTimeout(practiceState.flashTimer);
                }
                
                // Show the blend immediately
                blendDisplay.style.opacity = '1';
                
                // Set a timer to hide the blend - 200ms for Ultra Flash, 300ms for regular Flash
                const flashDuration = practiceState.ultraFlashMode ? 200 : 300;
                practiceState.flashTimer = setTimeout(() => {
                    blendDisplay.style.opacity = '0';
                }, flashDuration);
            } else {
                // Ensure blend is visible if flash mode is disabled
                blendDisplay.style.opacity = '1';
            }
        }

        // Start timer
        function startTimer() {
            const timerDisplay = document.getElementById('timer-display');
            let timeLeft = practiceState.timerValue;
            
            timerDisplay.textContent = `Time remaining: ${timeLeft}s`;
            
            practiceState.timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `Time remaining: ${timeLeft}s`;
                
                if (timeLeft <= 0) {
                    clearInterval(practiceState.timerInterval);
                    timerDisplay.textContent = 'Time\'s up!';
                    
                    // Play the audio when time expires
                    const currentBlend = practiceState.blends[practiceState.currentIndex];
                    playBlendAudio(currentBlend);
                    
                    // No auto-advance - we want students to control when to move forward
                    // with the spacebar after they've heard the correct pronunciation
                }
            }, 1000);
        }

        // Stop timer
        function stopTimer() {
            if (practiceState.timerInterval) {
                clearInterval(practiceState.timerInterval);
                practiceState.timerInterval = null;
            }
        }

        // Stop practice session
        function stopPracticeSession() {
            stopTimer();
            practiceState.isPlaying = false;
            
            // Clear any existing flash timer
            if (practiceState.flashTimer) {
                clearTimeout(practiceState.flashTimer);
                practiceState.flashTimer = null;
            }
            
            // Save the practice count before resetting
            const totalCompleted = practiceState.practiceCount;
            
            // Reset practice count for next session
            practiceState.practiceCount = 0;
            
            // Reset the counter display
            const counterDisplay = document.getElementById('counter-display');
            if (counterDisplay) {
                counterDisplay.textContent = 'Blends practiced: 0';
            }
            
            // Show a completion message if student did any practice
            if (totalCompleted > 0) {
                let message = `Practice session complete! You practiced ${totalCompleted} blends.`;
                setTimeout(() => {
                    alert(message);
                }, 100);
            }
        }

        // Navigate through blends
        function navigateBlends(direction) {
            // Stop current timer
            stopTimer();
            
            // Clear any existing flash timer
            if (practiceState.flashTimer) {
                clearTimeout(practiceState.flashTimer);
                practiceState.flashTimer = null;
            }
            
            // Navigate
            if (direction === 'next' && practiceState.currentIndex < practiceState.blends.length - 1) {
                practiceState.currentIndex++;
                
                // If moving forward, increment the practice count
                practiceState.practiceCount++;
                
                // Goal feature removed
                updateGoalCounter();
            } else if (direction === 'prev' && practiceState.currentIndex > 0) {
                practiceState.currentIndex--;
            }
            
            // Update buttons state
            document.getElementById('prev-btn').disabled = practiceState.currentIndex === 0;
            document.getElementById('next-btn').disabled = practiceState.currentIndex === practiceState.blends.length - 1;
            
            // Update display
            updateBlendDisplay();
            
            // Restart timer
            startTimer();
        }
        
        // Update the blend counter display
        function updateGoalCounter() {
            // Update the counter display with the current practice count
            const counterDisplay = document.getElementById('counter-display');
            if (counterDisplay) {
                counterDisplay.textContent = `Blends practiced: ${practiceState.practiceCount}`;
            }
        }

        // Play audio for a blend
        function playBlendAudio(blend) {
            document.getElementById('status-display').innerText = 'Processing blend: ' + blend;
            console.log(`*** DEBUGGING: Starting to process blend: "${blend}" ***`);
            
            // Cancel any previous speech
            window.speechSynthesis.cancel();
            
            // Use our special handling function for jē sound
            if (blend === 'jē') {
                console.log(`*** SPECIAL HANDLING for jē blend ***`);
                speakSpecialJeeSound();
                return;
            }
            
            // Use our special handling function for nē sound
            if (blend === 'nē') {
                console.log(`*** SPECIAL HANDLING for nē blend ***`);
                speakSpecialNeeSound();
                return;
            }
            
            // Special handling for problematic Long I sounds
            if (blend.length === 2 && blend.charAt(1) === 'ī') {
                const consonant = blend.charAt(0);
                // Check if this is one of our problematic consonants
                // Make sure 'v' is included for special handling
                if (['b', 'c', 'g', 'm', 'n', 's', 'v', 'w'].includes(consonant)) {
                    console.log(`*** SPECIAL HANDLING for ${blend} Long I blend ***`);
                    speakLongISound(consonant);
                    return;
                }
            }
            
            // Special handling for problematic Long O sounds
            if (blend.length === 2 && blend.charAt(1) === 'ō') {
                const consonant = blend.charAt(0);
                // Check if this is one of our problematic consonants
                // Make sure 'f' and 'k' are included for special handling
                if (['f', 'h', 'k'].includes(consonant)) {
                    console.log(`*** SPECIAL HANDLING for ${blend} Long O blend ***`);
                    speakLongOSound(consonant);
                    return;
                }
            }
            
            // Special handling for problematic Long U sounds
            if (blend.length === 2 && blend.charAt(1) === 'ū') {
                const consonant = blend.charAt(0);
                // Check if this is one of our problematic consonants
                // Added 't' and 'z' to handle tū->two and zū->zoo as requested
                // Added 'w' to handle wū->woot as requested
                if (['n', 'p', 't', 'w', 'z'].includes(consonant)) {
                    console.log(`*** SPECIAL HANDLING for ${blend} Long U blend ***`);
                    speakLongUSound(consonant);
                    return;
                }
            }
            
            // Special handling for Short A sounds - added to fix Short A pronounced as Short U
            if (blend.includes('ă')) {
                console.log(`*** SPECIAL HANDLING for ${blend} Short A blend ***`);
                
                // Use our override dictionary for the precise pronunciation
                let shortAWord = "";
                
                // Get the correct word with Short A sound based on specific blend
                if (blend === 'blă') shortAWord = "black";
                else if (blend === 'slă') shortAWord = "slat";
                else if (blend === 'bră') shortAWord = "brat";
                else if (blend === 'chă') shortAWord = "chat";
                else if (blend === 'shă') shortAWord = "shack";
                else if (blend === 'jă') shortAWord = "jam";
                else if (blend === 'wă') shortAWord = "wham";
                else if (blend === 'twă') shortAWord = "tan";
                // Three-letter trigraphs
                else if (blend === 'scă') shortAWord = "scat";
                else if (blend === 'stă') shortAWord = "stat";
                else if (blend === 'smă') shortAWord = "smat";
                else if (blend === 'snă') shortAWord = "snat";
                else if (blend === 'swă') shortAWord = "swam";
                else if (blend === 'thă') shortAWord = "that";
                else if (blend === 'phă') shortAWord = "phat";
                else if (blend === 'whă') shortAWord = "whap";
                else if (blend === 'quă') shortAWord = "quat";
                else {
                    // For other consonants, extract the consonant(s) and add "at" pattern
                    let consonant = blend.replace('ă', '');
                    shortAWord = consonant + "at";
                }
                
                console.log(`Using word "${shortAWord}" for Short A blend "${blend}"`);
                
                // Force the pronunciation by speaking the full word
                speakWithForcedPronunciation(shortAWord);
                return;
            }
            
            // Special handling for Short E sounds - complete word replacements
            if (blend.includes('ĕ')) {
                console.log(`*** SPECIAL HANDLING for ${blend} Short E blend ***`);
                
                // Direct word replacement map for Short E
                let shortEWord = "";
                
                // Get the correct word with Short E sound based on specific blend
                if (blend === 'bĕ') shortEWord = "bet";
                else if (blend === 'cĕ') shortEWord = "cet";
                else if (blend === 'dĕ') shortEWord = "det";
                else if (blend === 'fĕ') shortEWord = "fetch";  // Changed to 'fetch' to fix letter-by-letter pronunciation
                else if (blend === 'gĕ') shortEWord = "jet";  // Changed to 'jet' as requested
                else if (blend === 'rĕ') shortEWord = "rep";  // Changed to 'rep' to fix letter-by-letter pronunciation
                else if (blend === 'vĕ') shortEWord = "vet";
                else if (blend === 'blĕ') shortEWord = "blet";
                else if (blend === 'clĕ') shortEWord = "clet"; 
                else if (blend === 'crĕ') shortEWord = "cref"; // Special fix for cre using ef ending
                else if (blend === 'drĕ') shortEWord = "dret";
                else if (blend === 'flĕ') shortEWord = "flef"; // Special fix for fle using ef ending
                else if (blend === 'frĕ') shortEWord = "fret";
                else if (blend === 'glĕ') shortEWord = "glef"; // Special fix for gle using ef ending
                else if (blend === 'grĕ') shortEWord = "gret";
                else if (blend === 'plĕ') shortEWord = "plet"; // Changed to et pattern
                else if (blend === 'prĕ') shortEWord = "pret";
                else if (blend === 'scĕ') shortEWord = "set"; // Changed from scet to set as requested
                else if (blend === 'schĕ') shortEWord = "schet";
                else if (blend === 'scrĕ') shortEWord = "scret";
                else if (blend === 'shĕ') shortEWord = "shep"; // Changed from shet to shep as requested
                else if (blend === 'shrĕ') shortEWord = "shret";
                else if (blend === 'skĕ') shortEWord = "sket";
                else if (blend === 'slĕ') shortEWord = "slef"; // Special fix for sle using ef ending
                else if (blend === 'smĕ') shortEWord = "smet";
                else if (blend === 'snĕ') shortEWord = "snef"; // Special fix for sne using ef ending
                else if (blend === 'spĕ') shortEWord = "spet";
                else if (blend === 'splĕ') shortEWord = "splet";
                else if (blend === 'sprĕ') shortEWord = "spret";
                else if (blend === 'stĕ') shortEWord = "stet";
                else if (blend === 'strĕ') shortEWord = "stret";
                else if (blend === 'swĕ') shortEWord = "swet"; // Changed to et pattern
                else if (blend === 'thĕ') shortEWord = "thet";
                else if (blend === 'thrĕ') shortEWord = "thret";
                else if (blend === 'trĕ') shortEWord = "treb"; // Changed from tref to treb to avoid "trave" sound
                else if (blend === 'twĕ') shortEWord = "twet"; // Kept as twet as requested
                else if (blend === 'whĕ') shortEWord = "whet";
                else if (blend === 'wrĕ') shortEWord = "wret";
                else if (blend === 'phĕ') shortEWord = "fet"; // Changed from phet to fet as requested
                else if (blend === 'quĕ') shortEWord = "quet"; // Changed to et pattern
                else {
                    // For any other consonants, add "et" ending for a clear Short E
                    let consonant = blend.replace('ĕ', '');
                    shortEWord = consonant + "et";
                }
                
                console.log(`Using word "${shortEWord}" for Short E blend "${blend}"`);
                
                // Force the pronunciation by speaking the full word
                speakWithForcedPronunciation(shortEWord);
                return;
            }
            
            // Special handling for Short O sounds - for "fŏ" to use "fought"
            if (blend.includes('ŏ')) {
                console.log(`*** SPECIAL HANDLING for ${blend} Short O blend ***`);
                
                // Direct word replacement map for Short O
                let shortOWord = "";
                
                // Get the correct word with Short O sound based on specific blend
                if (blend === 'fŏ') shortOWord = "fought";
                else if (blend === 'vŏ') shortOWord = "fought"; // Using "fought" for 'vŏ' sound as well
                else if (blend === 'mŏ') shortOWord = "mop"; // Using "mop" for 'mŏ' as requested
                else {
                    // For other consonants, extract the consonant(s) and add "ot" pattern
                    let consonant = blend.replace('ŏ', '');
                    shortOWord = consonant + "ot";
                }
                
                console.log(`Using word "${shortOWord}" for Short O blend "${blend}"`);
                
                // Force the pronunciation by speaking the full word
                speakWithForcedPronunciation(shortOWord);
                return;
            }
            
            // Special handling for Short U sounds
            if (blend.includes('ŭ')) {
                console.log(`*** SPECIAL HANDLING for ${blend} Short U blend ***`);
                
                // Direct word replacement map for Short U
                let shortUWord = "";
                
                // Get the correct word with Short U sound based on specific blend
                // Consistently use "uh" endings for most blends to create uniformity
                if (blend === 'blŭ') shortUWord = "bluh";
                else if (blend === 'flŭ') shortUWord = "fluh";
                else if (blend === 'glŭ') shortUWord = "gluh";
                else if (blend === 'plŭ') shortUWord = "pluh";
                else if (blend === 'slŭ') shortUWord = "sluh";
                // Special cases using "ut" endings as requested
                else if (blend === 'cŭ') shortUWord = "cut";  // Using 'cut' instead of 'cuh'
                else if (blend === 'gŭ') shortUWord = "gut";  // Using 'gut' instead of 'guh'
                else if (blend === 'jŭ') shortUWord = "jut";  // Using 'jut' instead of 'jug'
                else if (blend === 'lŭ') shortUWord = "lut";  // Using 'lut' instead of 'luh'
                else if (blend === 'rŭ') shortUWord = "rut";  // Using 'rut' instead of 'ruh'
                else if (blend === 'sŭ') shortUWord = "sup";  // Using "sup" - simple modification
                else if (blend === 'zŭ') shortUWord = "such";  // Using "such" as requested
                // Other special cases
                else if (blend === 'qŭ') shortUWord = "quack";
                else if (blend === 'wŭ') shortUWord = "wuh"; 
                else if (blend === 'yŭ') shortUWord = "yuh";
                else {
                    // For other consonants, extract the consonant(s) and add "uh" pattern
                    let consonant = blend.replace('ŭ', '');
                    shortUWord = consonant + "uh";
                }
                
                console.log(`Using word "${shortUWord}" for Short U blend "${blend}"`);
                
                // Use a special function for short U sounds to make them less robotic
                speakShortUSound(shortUWord, blend);
                return;
            }
            
            // Special function for Short U sounds
            function speakShortUSound(text, blend) {
                console.log(`Speaking Short U pronunciation: "${text}"`);
                document.getElementById('status-display').innerText = 'Short U: ' + text;
                
                // Use speech synthesis
                if ('speechSynthesis' in window) {
                    // Cancel any ongoing speech
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.rate = 0.9;  // Slightly faster speech for more natural sound
                    utterance.pitch = 1.0;  // Normal pitch
                    
                    // Use a slight delay to ensure clean playback
                    setTimeout(() => {
                        window.speechSynthesis.speak(utterance);
                    }, 100);
                }
            
            }
            
            // Special handling for Short I sounds - complete word replacements
            if (blend.includes('ĭ')) {
                console.log(`*** SPECIAL HANDLING for ${blend} Short I blend ***`);
                
                // Direct word replacement map for Short I
                let shortIWord = "";
                
                // Improved logging for debugging
                console.log(`Debug - Blend being processed: "${blend}"`);
                console.log(`Debug - Is blend === 'mĭ'? ${blend === 'mĭ'}`);
                console.log(`Debug - Blend characters: ${Array.from(blend).map(c => c.charCodeAt(0)).join(', ')}`);
                console.log(`Debug - 'mĭ' characters: ${Array.from('mĭ').map(c => c.charCodeAt(0)).join(', ')}`);
                
                // SPECIAL HANDLING FOR MĬ ONLY - MAXIMUM OVERRIDE
                if (blend.includes('m') && blend.includes('ĭ') && blend.length === 2) {
                    console.log(`**** SPECIALIZED MIT HANDLER ACTIVATED ****`);
                    
                    // Alternative: Create an audio element with a text-to-speech API
                    // This bypasses the standard speech synthesis and uses prerecorded audio
                    function playMitSound() {
                        // Use a simple audio approach to make sure it works
                        const audio = new Audio();
                        
                        // Three options to ensure at least one works
                        try {
                            // OPTION 1: Use built-in Text-to-Speech with a trick
                            const mitUtterance = new SpeechSynthesisUtterance("mitt");
                            mitUtterance.rate = 0.7;
                            mitUtterance.lang = 'en-US';
                            
                            // Clear queue
                            window.speechSynthesis.cancel();
                            
                            // Speak the sound
                            window.speechSynthesis.speak(mitUtterance);
                            
                            console.log("Using 'mitt' for pronunciation");
                        } catch (e) {
                            console.error("TTS failed:", e);
                        }
                    }
                    
                    // Display status
                    document.getElementById('status-display').innerText = `Pronouncing: mit`;
                    
                    // Run the special mit handler
                    playMitSound();
                    
                    return; // Exit early
                }
                // Get the correct word with Short I sound based on specific blend
                else if (blend === 'cĭ') shortIWord = "sit";
                else if (blend === 'mĭ') shortIWord = "mit"; // Already using "mit" as requested
                else if (blend === 'vĭ') shortIWord = "Vick";
                else if (blend === 'blĭ') shortIWord = "blit";
                else if (blend === 'clĭ') shortIWord = "clit";
                else if (blend === 'drĭ') shortIWord = "drit";
                else if (blend === 'flĭ') shortIWord = "flit";
                else if (blend === 'frĭ') shortIWord = "frit";
                else if (blend === 'glĭ') shortIWord = "glit";
                else if (blend === 'grĭ') shortIWord = "grit";
                else if (blend === 'plĭ') shortIWord = "plit";
                else if (blend === 'prĭ') shortIWord = "prit";
                else if (blend === 'scĭ') shortIWord = "scit";
                else if (blend === 'schĭ') shortIWord = "schit";
                else if (blend === 'scrĭ') shortIWord = "scrit";
                else if (blend === 'shĭ') shortIWord = "ship"; // Changed from shit to ship as requested
                else if (blend === 'shrĭ') shortIWord = "shrit";
                else if (blend === 'skĭ') shortIWord = "skit";
                else if (blend === 'slĭ') shortIWord = "slit";
                else if (blend === 'smĭ') shortIWord = "smit";
                else if (blend === 'snĭ') shortIWord = "snit";
                else if (blend === 'spĭ') shortIWord = "spit";
                else if (blend === 'splĭ') shortIWord = "split";
                else if (blend === 'sprĭ') shortIWord = "sprit";
                else if (blend === 'stĭ') shortIWord = "stit";
                else if (blend === 'strĭ') shortIWord = "strit";
                else if (blend === 'swĭ') shortIWord = "swit";
                else if (blend === 'thĭ') shortIWord = "thit";
                else if (blend === 'thrĭ') shortIWord = "thrit";
                else if (blend === 'trĭ') shortIWord = "trit";
                else if (blend === 'twĭ') shortIWord = "twit";
                else if (blend === 'whĭ') shortIWord = "whit";
                else if (blend === 'wrĭ') shortIWord = "writ";
                else {
                    // For any other consonants, add "it" ending for a clear Short I
                    let consonant = blend.replace('ĭ', '');
                    shortIWord = consonant + "it";
                }
                
                console.log(`Using word "${shortIWord}" for Short I blend "${blend}"`);
                
                // Force the pronunciation by speaking the full word
                speakWithForcedPronunciation(shortIWord);
                return;
            }
            
            // Get the proper pronunciation
            let pronunciation = getPhoneticRepresentation(blend);
            console.log(`Initial pronunciation: "${pronunciation}" for blend "${blend}"`);
            
            // CRITICAL FIX: Force remove any "as in" text that might be in the pronunciation
            // Use global flag and be very aggressive with any pattern matching
            pronunciation = pronunciation.replace(/ as in.*/g, '').trim();
            pronunciation = pronunciation.replace(/\bas\sin\b.*$/g, '').trim();
            pronunciation = pronunciation.replace(/\s+as\s+in\s+.*$/g, '').trim();
            
            // Remove any spaces which cause spelling out behavior
            pronunciation = pronunciation.replace(/\s+/g, '');
            
            // Log the final cleaned pronunciation for verification
            console.log(`Final cleaned pronunciation: "${pronunciation}"`);
            document.getElementById('status-display').innerText = 'Pronunciation: ' + pronunciation;
            
            // Special function solely for "mit" pronunciation 
            function speakWithExtraPrecision(text) {
                console.log(`Speaking with extra precision: "${text}"`);
                document.getElementById('status-display').innerText = 'Special pronunciation: ' + text;
                
                if ('speechSynthesis' in window) {
                    // Make sure speech synthesis queue is clear
                    window.speechSynthesis.cancel();
                    
                    // Create a tailored utterance just for "mit"
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.rate = 0.7; // Slower for clarity
                    utterance.pitch = 1.0; // Natural pitch
                    utterance.lang = 'en-US';
                    utterance.volume = 1.0;
                    
                    // Get voices and select the best one for clear pronunciation
                    const voices = window.speechSynthesis.getVoices();
                    let preferredVoice = voices.find(voice => 
                        voice.name.includes('Google US English') || 
                        voice.name.includes('Microsoft David')
                    );
                    
                    if (preferredVoice) {
                        utterance.voice = preferredVoice;
                        console.log('Using voice for special mit sound: ' + preferredVoice.name);
                    }
                    
                    // Add a slight pause then speak "mit" as a whole word
                    setTimeout(() => {
                        window.speechSynthesis.speak(utterance);
                    }, 100);
                }
            }
            
            // Helper function for forced pronunciation
            function speakWithForcedPronunciation(text) {
                console.log(`Speaking forced pronunciation: "${text}"`);
                document.getElementById('status-display').innerText = 'Forced pronunciation: ' + text;
                
                // Special handling for h-ending words to prevent them from sounding like "clay" or "flay"
                if (text.endsWith('ih')) {
                    speakHEndingWord(text);
                    return;
                }
                
                // Use speech synthesis
                if ('speechSynthesis' in window) {
                    // Create a fresh utterance for each blend
                    const utterance = new SpeechSynthesisUtterance(text);
                    
                    // Set appropriate rate and pitch for male voice
                    utterance.rate = 0.8;
                    utterance.pitch = 0.9;
                    utterance.lang = 'en-US';
                    utterance.volume = 1.0;
                    
                    // Get available voices
                    let voices = window.speechSynthesis.getVoices();
                    
                    // If voices are not available yet, wait for them
                    if (voices.length === 0) {
                        window.speechSynthesis.onvoiceschanged = function() {
                            voices = window.speechSynthesis.getVoices();
                            setVoiceAndSpeak(utterance, voices, blend, text);
                        };
                    } else {
                        setVoiceAndSpeak(utterance, voices, blend, text);
                    }
                }
            }
            
            // Special function for h-ending words to make sure they sound like "i" not "ay"
            function speakHEndingWord(text) {
                console.log(`Special handling for h-ending word: "${text}"`);
                document.getElementById('status-display').innerText = 'Special h-ending: ' + text;
                
                if ('speechSynthesis' in window) {
                    // Cancel any ongoing speech
                    window.speechSynthesis.cancel();
                    
                    // For Short I sounds, we'll use a different approach
                    if (text.endsWith('ih')) {
                        // Create a special utterance for Short I with 'ih' ending
                        const utterance = new SpeechSynthesisUtterance(text);
                        utterance.rate = 0.6; // Slower for clarity
                        utterance.pitch = 0.9; // Lower pitch helps with Short I sounds
                        utterance.volume = 1.0;
                        
                        // Speak with a slight delay
                        setTimeout(() => {
                            window.speechSynthesis.speak(utterance);
                        }, 100);
                    } else {
                        // Create separate utterances to force correct pronunciation
                        // Extract the consonant part (everything before 'eh')
                        const consonantPart = text.substring(0, text.length - 2);
                        
                        // First speak consonant + "e" with specific settings
                        const firstPart = new SpeechSynthesisUtterance(consonantPart + "i");
                        firstPart.rate = 0.7; // Slower for clarity
                        firstPart.pitch = 1.1; // Slightly higher pitch to emphasize short I sound
                        
                        // Speak the first part
                        window.speechSynthesis.speak(firstPart);
                    }
                }
            }
            
            // Special handling for Short I sounds - complete word replacements
            if (blend.includes('ĭ')) {
                console.log(`*** SPECIAL HANDLING for ${blend} Short I blend ***`);
                
                // Direct word replacement map for Short I
                let shortIWord = "";
                
                // Handle specific blends with optimized words
                if (blend === 'bĭ') shortIWord = 'bit';
                else if (blend === 'cĭ') shortIWord = 'kit';
                else if (blend === 'dĭ') shortIWord = 'did';
                else if (blend === 'fĭ') shortIWord = 'fit';
                else if (blend === 'gĭ') shortIWord = 'jit';  // Changed to 'jit' as requested
                else if (blend === 'hĭ') shortIWord = 'hit';
                else if (blend === 'jĭ') shortIWord = 'jif';
                else if (blend === 'kĭ') shortIWord = 'kit';
                else if (blend === 'lĭ') shortIWord = 'lit';
                else if (blend === 'mĭ') shortIWord = 'mit';
                else if (blend === 'nĭ') shortIWord = 'nit';
                else if (blend === 'pĭ') shortIWord = 'pit';
                else if (blend === 'rĭ') shortIWord = 'rip';  // Changed to 'rip' for proper blend sound
                else if (blend === 'sĭ') shortIWord = 'sit';
                else if (blend === 'tĭ') shortIWord = 'tit';
                else if (blend === 'vĭ') shortIWord = 'vit';
                else if (blend === 'wĭ') shortIWord = 'wit';
                else if (blend === 'yĭ') shortIWord = 'yip';
                else if (blend === 'zĭ') shortIWord = 'zip';
                else {
                    // For any other blends not in our map
                    const consonant = blend.charAt(0);
                    shortIWord = consonant + 'it';
                }
                
                console.log(`Using word "${shortIWord}" for Short I blend "${blend}"`);
                
                // Use the speakWithDetailedVoiceSettings function for better articulation
                speakWithDetailedVoiceSettings(shortIWord, blend);
                return;
            }
            
            // Use speech synthesis
            if ('speechSynthesis' in window) {
                // Create a fresh utterance for each blend
                const utterance = new SpeechSynthesisUtterance(pronunciation);
                
                // Set appropriate rate based on vowel type
                if (blend.match(/[āēīōū]/)) {
                    // Long vowels - normal rate
                    utterance.rate = 0.7;
                } else {
                    // Short vowels - slower rate for better articulation
                    utterance.rate = 0.6;
                }
                
                // Different pitch for long vs short vowels
                if (blend.match(/[āēīōū]/)) {
                    // Long vowels - slightly higher pitch
                    utterance.pitch = 1.1;
                } else {
                    // Short vowels - slightly lower pitch
                    utterance.pitch = 0.95;
                }
                
                utterance.lang = 'en-US';
                
                // Ensure maximum volume for better audibility
                utterance.volume = 1.0;
                
                // Make sure it only plays once and prevent repeats
                utterance.onend = function() {
                    document.getElementById('status-display').innerText = 'Finished playing: ' + pronunciation;
                };
                
                // Get available voices
                let voices = window.speechSynthesis.getVoices();
                
                // If voices are not available yet, wait for them
                if (voices.length === 0) {
                    window.speechSynthesis.onvoiceschanged = function() {
                        voices = window.speechSynthesis.getVoices();
                        setVoiceAndSpeak(utterance, voices, blend, pronunciation);
                    };
                } else {
                    setVoiceAndSpeak(utterance, voices, blend, pronunciation);
                }
            } else {
                document.getElementById('status-display').innerText = 'Speech synthesis not supported';
                alert('Speech synthesis is not supported in your browser. Please try using Firefox or Chrome.');
            }
        }

        // Set voice and speak with improved voice selection for Firefox compatibility
        function setVoiceAndSpeak(utterance, voices, blend, pronunciation) {
            // Log all available voices for debugging
            console.log('Available voices:', voices.map(v => v.name).join(', '));
            
            // Top-tier priority voices for phonetic clarity - male voices
            let preferredVoice = voices.find(voice => 
                voice.name.includes('Google UK English Male') || // Google's male voice is excellent for phonetics
                voice.name.includes('Google US English Male') || // Google's male voice
                voice.name.includes('Microsoft David') || // Microsoft's David voice
                voice.name.includes('Microsoft Mark') || // Microsoft's Mark voice
                (voice.name.includes('English') && voice.name.includes('Male'))
            );
            
            // Second tier - explicitly male voices
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.name.toLowerCase().includes('male') || 
                    voice.name.toLowerCase().includes('man')
                );
            }
            
            // Third tier - common male names with good articulation
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.name.includes('David') ||
                    voice.name.includes('Mark') ||
                    voice.name.includes('Tom') ||
                    voice.name.includes('Daniel') ||
                    voice.name.includes('Alex') ||
                    voice.name.includes('James') ||
                    voice.name.includes('John') ||
                    voice.name.includes('Peter')
                );
            }
            
            // Firefox-specific voices that work well with phonetics
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.name.includes('English') && voice.name.includes('US') && 
                    !voice.name.includes('Microsoft') && // Skip Microsoft voices which can be problematic in Firefox
                    (voice.name.toLowerCase().includes('male') || // Prefer explicitly male voices
                     !voice.name.toLowerCase().includes('female')) // Or at least not female voices
                );
            }
            
            // Other high-quality voices that aren't explicitly female
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    (voice.name.includes('Google US English') ||
                    voice.name.includes('English United States') ||
                    voice.name.includes('Alex')) &&
                    !voice.name.toLowerCase().includes('female')
                );
            }
            
            // Fall back to any English voice if needed
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.lang.includes('en-US') || 
                    voice.lang.includes('en_US') || 
                    voice.lang.includes('en-GB')
                );
            }
            
            // If we have a preferred voice, use it
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice: ' + preferredVoice.name);
            } else if (voices.length > 0) {
                // If no matching voice but voices exist, use the first available one
                utterance.voice = voices[0];
                console.log('Falling back to first available voice: ' + voices[0].name);
            }
            
            // Ensure we're using the correct language
            utterance.lang = 'en-US';
            
            // Set the utterance text directly - DON'T USE A VARIABLE
            utterance.text = pronunciation;
            
            // Fine-tune voice parameters based on the selected voice for male voices
            if (utterance.voice) {
                // Adjust pitch for male voices specifically
                const isMaleVoice = 
                    utterance.voice.name.toLowerCase().includes('male') || 
                    utterance.voice.name.includes('David') ||
                    utterance.voice.name.includes('Mark') ||
                    utterance.voice.name.includes('Daniel') ||
                    utterance.voice.name.includes('Thomas');
                
                if (utterance.voice.name.includes('Google') && isMaleVoice) {
                    // Male Google voices work well with a slightly lower pitch
                    utterance.pitch = 0.95;
                    utterance.rate = 0.8;  // Slightly slower for clarity
                } else if (utterance.voice.name.includes('Microsoft') && isMaleVoice) {
                    // Microsoft male voices need a more neutral pitch
                    utterance.pitch = 1.0;
                    utterance.rate = 0.85;
                } else if (isMaleVoice) {
                    // Default for other male voices
                    utterance.pitch = 0.9;
                    utterance.rate = 0.8;
                } else {
                    // For any non-male voices that might be used as fallback
                    utterance.pitch = 0.85;  // Lower pitch to sound more masculine
                    utterance.rate = 0.8;    // Slower rate for clarity
                }
            } else {
                // No voice selected, use standard parameters for male sound
                utterance.pitch = 0.9;
                utterance.rate = 0.8;
            }
            
            // Log the final voice settings for debugging
            console.log(`Voice settings: voice=${utterance.voice?.name}, pitch=${utterance.pitch}, rate=${utterance.rate}`);
            
            // Debugging counter
            if (!window.debugCounter) window.debugCounter = 0;
            window.debugCounter++;
            
            // Add a distinguishing number to help debug
            document.getElementById('status-display').innerText = 'Playing: ' + pronunciation + ' (' + window.debugCounter + ') with voice: ' + 
                (utterance.voice ? utterance.voice.name : 'Default');
            
            // Cancel any existing speech to prevent overlapping
            window.speechSynthesis.cancel();
            
            // Speak the blend with a slight delay to ensure the browser is ready
            setTimeout(() => {
                try {
                    window.speechSynthesis.speak(utterance);
                    
                    // Set a backup timer in case speech synthesis fails silently
                    setTimeout(() => {
                        const isSpeaking = window.speechSynthesis.speaking;
                        if (!isSpeaking) {
                            console.log('Speech synthesis may have failed silently, trying again...');
                            window.speechSynthesis.cancel();
                            window.speechSynthesis.speak(utterance);
                        }
                    }, 500);
                } catch (e) {
                    document.getElementById('status-display').innerText = 'Speech error: ' + e.message;
                    console.error('Speech synthesis error:', e);
                }
            }, 100);
        }

        // Speak using phonemic transcription for better pronunciation accuracy
        function speakDirectText(text) {
            console.log(`Speaking direct text with phonemic approach: "${text}"`);
            document.getElementById('status-display').innerText = 'Direct pronunciation: ' + text;
            
            // Create a map of phonemic spellings for problematic sounds
            const phoneticMap = {
                'jee': 'JH IY1', // Phonemic transcription for "jee"
                'nee': 'N IY1',   // Phonemic transcription for "nee"
                'cla': 'K L AA1'  // Phonemic transcription for "cla"
            };
            
            // Get phonemic transcription if available
            const phonemicText = phoneticMap[text.toLowerCase()] || text;
            
            // Use speech synthesis with phonemic approach
            if ('speechSynthesis' in window) {
                // Cancel any existing speech
                window.speechSynthesis.cancel();
                
                // Choose strategy based on the specific blend
                if (text.toLowerCase() === 'jee') {
                    // For "jee" sound
                    speakSpecialJeeSound();
                } else if (text.toLowerCase() === 'nee') {
                    // For "nee" sound
                    speakSpecialNeeSound();
                } else {
                    // Default handling with phonemic transcription
                    speakWithPhonemicTranscription(phonemicText);
                }
            } else {
                console.error('Speech synthesis not supported');
                alert('Speech synthesis is not supported in your browser.');
            }
        }
        
        // Special "jee" sound using very specific approach
        function speakSpecialJeeSound() {
            console.log("Using special technique for JEE sound");
            
            // Instead of trying to blend two separate sounds, use a known working pronunciation pattern
            // Using "jeep" without the final "p" sound works better than breaking into parts
            const utterance = new SpeechSynthesisUtterance("jeep");
            
            // Configure the voice
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            utterance.rate = 0.7;  // Slightly slower for clarity
            utterance.pitch = 1.0;
            
            // Get voices and prioritize specific ones known to work well
            const voices = window.speechSynthesis.getVoices();
            
            // Find an appropriate voice, prioritizing Google voices which are typically clearer
            const preferredVoice = voices.find(voice => 
                voice.name.includes('Google US English') || 
                voice.name.includes('Microsoft David') ||
                voice.name.includes('Male') ||
                voice.name.includes('male')
            );
            
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice for jee sound: ' + preferredVoice.name);
            }
            
            // Set a callback to cut off the final "p" sound
            let hasSpoken = false;
            utterance.onmark = function(event) {
                if (!hasSpoken) {
                    // Cancel after the vowel sound but before the final consonant
                    setTimeout(() => {
                        window.speechSynthesis.cancel();
                        hasSpoken = true;
                    }, 300); // Timing adjusted to cut off just before the "p" sound
                }
            };
            
            // Speak
            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
                console.log("Speaking 'jeep' with early cutoff");
            }, 100);
        }
        
        // Special "nee" sound using pronunciation of "knee"
        function speakSpecialNeeSound() {
            console.log("Using 'knee' pronunciation for NEE sound");
            
            // Try using "knee" with very careful pronunciation settings
            const utterance = new SpeechSynthesisUtterance("knee");
            
            // Configure for maximum clarity
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            utterance.rate = 0.7;  // Slightly slower than normal
            utterance.pitch = 0.9; // Slightly deeper voice
            
            // Get voices and prioritize specific ones known to work well
            const voices = window.speechSynthesis.getVoices();
            
            // Try specific voices that are known to pronounce "knee" correctly
            let preferredVoice = null;
            
            // Try to find Google voices first as they tend to be clearer
            preferredVoice = voices.find(voice => 
                voice.name.includes('Google US English')
            );
            
            // If no Google voice, try Microsoft voices
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.name.includes('Microsoft')
                );
            }
            
            // If still no preferred voice, try any male voice
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.name.toLowerCase().includes('male')
                );
            }
            
            // Apply the voice if found
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice for knee sound: ' + preferredVoice.name);
            }
            
            // Special handling for voice - we'll try to emphasize the word
            // by adding a slight pause before it
            const pauseUtterance = new SpeechSynthesisUtterance(".");
            pauseUtterance.volume = 0;
            pauseUtterance.rate = 0.1;
            
            // Update status display
            document.getElementById('status-display').innerText = 'Pronouncing: nee';
            
            // Speak after canceling any existing speech
            window.speechSynthesis.cancel();
            
            // Speak the word with a slight initial pause
            setTimeout(() => {
                window.speechSynthesis.speak(pauseUtterance);
                
                // Speak the actual word after the pause
                setTimeout(() => {
                    window.speechSynthesis.speak(utterance);
                    console.log("Speaking 'knee'");
                }, 50);
            }, 100);
        }
        
        // Special handling for Long I sounds - fixes "bi, ci, mi, ni, si, vi, wi" pronunciations
        function speakLongISound(consonant) {
            console.log(`Using special handling for Long I sound: ${consonant}ī`);
            
            // Different word templates to use for Long I sounds
            const wordTemplates = {
                'b': 'buy',
                'c': 'sigh',  // Using soft C (sounds like 's') for 'cī' sound
                'g': 'jive',  // Updated to 'jive' as requested
                'm': 'my',
                'n': 'nigh',
                's': 'sigh',
                'v': 'vipe',  // Changed to 'vipe' for better long I sound
                'w': 'why'
            };
            
            // Get the appropriate word template or use a generic one
            const wordTemplate = wordTemplates[consonant] || consonant + 'ine';
            
            // Create and configure utterance
            const utterance = new SpeechSynthesisUtterance(wordTemplate);
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            utterance.rate = 0.7;  // Slower for clarity
            utterance.pitch = 0.9;
            
            // Special handling for 'v' to emphasize the long I sound
            if (consonant === 'v') {
                utterance.rate = 0.65;  // Even slower for better 'vite' pronunciation
                utterance.pitch = 1.0;  // Higher pitch for long I sound
                console.log("Using enhanced pronunciation for vī → vite with long I sound");
            }
            
            // Get voices and select the best one
            const voices = window.speechSynthesis.getVoices();
            let preferredVoice = voices.find(voice => 
                voice.name.includes('Google US English') || 
                voice.name.includes('Microsoft') || 
                voice.name.toLowerCase().includes('male')
            );
            
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice for Long I sound: ' + preferredVoice.name);
            }
            
            // Update status display
            document.getElementById('status-display').innerText = `Pronouncing: ${consonant}ī`;
            
            // Cancel any existing speech
            window.speechSynthesis.cancel();
            
            // Add a slight pause before speaking
            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
                console.log(`Speaking '${wordTemplate}' for ${consonant}ī sound`);
            }, 100);
        }
        
        // Special handling for Long U sounds - fixes "nū" and "pū" pronunciations
        function speakLongUSound(consonant) {
            console.log(`Using special handling for Long U sound: ${consonant}ū`);
            
            // Special handling for "pū" which needs extra treatment
            if (consonant === 'p') {
                // Use special technique for "pū" sound
                console.log('Using advanced handling for pū sound');
                
                // Create special utterance for "pū"
                // Use "pew" as suggested for better pronunciation
                const utterance = new SpeechSynthesisUtterance("pew");
                utterance.lang = 'en-US';
                utterance.volume = 1.0;
                utterance.rate = 0.75;  // Moderate speed to get the proper 'ew' sound
                utterance.pitch = 1.0;
                
                // Get voices and select the best one with emphasis on male voices
                const voices = window.speechSynthesis.getVoices();
                let preferredVoice = voices.find(voice => 
                    voice.name.includes('Google US English') || 
                    voice.name.includes('Microsoft David') || 
                    voice.name.toLowerCase().includes('male')
                );
                
                if (preferredVoice) {
                    utterance.voice = preferredVoice;
                    console.log('Using voice for pū sound: ' + preferredVoice.name);
                }
                
                // Update status display
                document.getElementById('status-display').innerText = `Pronouncing: pū`;
                
                // Cancel any existing speech
                window.speechSynthesis.cancel();
                
                // Add a slight pause before speaking
                setTimeout(() => {
                    window.speechSynthesis.speak(utterance);
                    console.log(`Special handling for pū sound using 'pew'`);
                }, 100);
                
                return;
            }
            
            // Special word templates for other Long U sounds
            const wordTemplates = {
                'n': 'new',  // Using "new" for "nū" instead of "noo"
                't': 'two',  // Using "two" for "tū" as requested
                'w': 'woot', // Using "woot" for "wū" as requested
                'z': 'zoo'   // Using "zoo" for "zū" as requested
            };
            
            // Get the appropriate word template
            const wordTemplate = wordTemplates[consonant] || consonant + 'ew';
            
            // Create and configure utterance
            const utterance = new SpeechSynthesisUtterance(wordTemplate);
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            utterance.rate = 0.65;  // Slower for clarity
            utterance.pitch = 0.9;
            
            // Get voices and select the best one
            const voices = window.speechSynthesis.getVoices();
            let preferredVoice = voices.find(voice => 
                voice.name.includes('Google US English') || 
                voice.name.includes('Microsoft David') || 
                voice.name.toLowerCase().includes('male')
            );
            
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice for Long U sound: ' + preferredVoice.name);
            }
            
            // Update status display
            document.getElementById('status-display').innerText = `Pronouncing: ${consonant}ū`;
            
            // Cancel any existing speech
            window.speechSynthesis.cancel();
            
            // Add a slight pause before speaking
            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
                console.log(`Speaking '${wordTemplate}' for ${consonant}ū sound`);
            }, 100);
        }
        
        // Special handling for Long O sounds with issues - fixes "fō", "hō", "kō" pronunciations
        function speakLongOSound(consonant) {
            console.log(`Using special handling for Long O sound: ${consonant}ō`);
            
            // Special handling for "fō" and "kō" which need extra treatment
            if (consonant === 'f') {
                // Use special technique for "fō" using "fote" for proper long O sound
                console.log('Using advanced handling for fō sound');
                
                // Create special utterance for "fō"
                const utterance = new SpeechSynthesisUtterance("fote");
                utterance.lang = 'en-US';
                utterance.volume = 1.0;
                utterance.rate = 0.65;  // Slower for clarity
                utterance.pitch = 0.9;
                
                // Get voices and select the best one with emphasis on male voices
                const voices = window.speechSynthesis.getVoices();
                let preferredVoice = voices.find(voice => 
                    voice.name.includes('Google US English') || 
                    voice.name.includes('Microsoft David') || 
                    voice.name.toLowerCase().includes('male')
                );
                
                if (preferredVoice) {
                    utterance.voice = preferredVoice;
                    console.log('Using voice for fō sound: ' + preferredVoice.name);
                }
                
                // Update status display
                document.getElementById('status-display').innerText = `Pronouncing: fō`;
                
                // Cancel any existing speech
                window.speechSynthesis.cancel();
                
                // Add a slight pause before speaking
                setTimeout(() => {
                    window.speechSynthesis.speak(utterance);
                    console.log(`Special handling for fō sound using 'foam'`);
                }, 100);
                
                return;
            }
            else if (consonant === 'k') {
                // Use special technique for "kō" to prevent the "uh" sound at the end
                console.log('Using advanced handling for kō sound');
                
                // Create special utterance for "kō"
                const utterance = new SpeechSynthesisUtterance("coat");
                utterance.lang = 'en-US';
                utterance.volume = 1.0;
                utterance.rate = 0.65;  // Slower for clarity
                utterance.pitch = 0.9;
                
                // Get voices and select the best one with emphasis on male voices
                const voices = window.speechSynthesis.getVoices();
                let preferredVoice = voices.find(voice => 
                    voice.name.includes('Google US English') || 
                    voice.name.includes('Microsoft David') || 
                    voice.name.toLowerCase().includes('male')
                );
                
                if (preferredVoice) {
                    utterance.voice = preferredVoice;
                    console.log('Using voice for kō sound: ' + preferredVoice.name);
                }
                
                // Update status display
                document.getElementById('status-display').innerText = `Pronouncing: kō`;
                
                // Cancel any existing speech
                window.speechSynthesis.cancel();
                
                // Add a slight pause before speaking
                setTimeout(() => {
                    window.speechSynthesis.speak(utterance);
                    console.log(`Special handling for kō sound using 'coat'`);
                }, 100);
                
                return;
            }
            
            // Different word templates to use for other problematic Long O sounds
            const wordTemplates = {
                'h': 'hoe'   // Ensure "hoe" is properly pronounced
            };
            
            // Get the appropriate word template
            const wordTemplate = wordTemplates[consonant] || consonant + 'oe';
            
            // Create and configure utterance
            const utterance = new SpeechSynthesisUtterance(wordTemplate);
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            utterance.rate = 0.65;  // Slower for clarity
            utterance.pitch = 0.9;
            
            // Get voices and select the best one
            const voices = window.speechSynthesis.getVoices();
            let preferredVoice = voices.find(voice => 
                voice.name.includes('Google US English') || 
                voice.name.includes('Microsoft') || 
                voice.name.toLowerCase().includes('male')
            );
            
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice for Long O sound: ' + preferredVoice.name);
            }
            
            // Update status display
            document.getElementById('status-display').innerText = `Pronouncing: ${consonant}ō`;
            
            // Cancel any existing speech
            window.speechSynthesis.cancel();
            
            // Add a slight pause before speaking
            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
                console.log(`Speaking '${wordTemplate}' for ${consonant}ō sound`);
            }, 100);
        }
        
        // Special handling for jē sound (like in "jeep")
        function speakSpecialJeeSound() {
            console.log('Using special handling for jē sound');
            
            // Create utterance with the word "jeep"
            const utterance = new SpeechSynthesisUtterance("jeep");
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            utterance.rate = 0.7;  // Slower for clarity
            utterance.pitch = 0.9;
            
            // Get voices and select the best one
            const voices = window.speechSynthesis.getVoices();
            let preferredVoice = voices.find(voice => 
                voice.name.includes('Google US English') || 
                voice.name.includes('Microsoft') || 
                voice.name.toLowerCase().includes('male')
            );
            
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice for jē sound: ' + preferredVoice.name);
            }
            
            // Update status display
            document.getElementById('status-display').innerText = 'Pronouncing: jē';
            
            // Cancel any existing speech
            window.speechSynthesis.cancel();
            
            // Add a slight pause before speaking
            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
                console.log('Speaking "jeep" for jē sound');
            }, 100);
        }
        
        // Special handling for nē sound (like in "knee")
        function speakSpecialNeeSound() {
            console.log('Using special handling for nē sound');
            
            // Create utterance with the word "knee"
            const utterance = new SpeechSynthesisUtterance("knee");
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            utterance.rate = 0.7;  // Slower for clarity
            utterance.pitch = 0.9;
            
            // Get voices and select the best one
            const voices = window.speechSynthesis.getVoices();
            let preferredVoice = voices.find(voice => 
                voice.name.includes('Google US English') || 
                voice.name.includes('Microsoft') || 
                voice.name.toLowerCase().includes('male')
            );
            
            if (preferredVoice) {
                utterance.voice = preferredVoice;
                console.log('Using voice for nē sound: ' + preferredVoice.name);
            }
            
            // Update status display
            document.getElementById('status-display').innerText = 'Pronouncing: nē';
            
            // Cancel any existing speech
            window.speechSynthesis.cancel();
            
            // Add a slight pause before speaking
            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
                console.log('Speaking "knee" for nē sound');
            }, 100);
        }
        
        // Configure an utterance to use male voice
        function configureForMaleVoice(utterance) {
            utterance.lang = 'en-US';
            utterance.volume = 1.0;
            
            // Get available voices
            let voices = window.speechSynthesis.getVoices();
            
            // Find a male voice
            let maleVoice = voices.find(voice => 
                voice.name.includes('Google UK English Male') ||
                voice.name.includes('Microsoft David') ||
                voice.name.toLowerCase().includes('male')
            );
            
            if (maleVoice) {
                utterance.voice = maleVoice;
                console.log('Using male voice: ' + maleVoice.name);
            }
        }
        
        // Speak using phonemic transcription
        function speakWithPhonemicTranscription(phonemicText) {
            console.log(`Speaking with phonemic transcription: "${phonemicText}"`);
            
            // Create utterance
            const utterance = new SpeechSynthesisUtterance(phonemicText);
            
            // Set appropriate rate and pitch for male voice
            utterance.rate = 0.8;
            utterance.pitch = 0.9;
            utterance.volume = 1.0;
            utterance.lang = 'en-US';
            
            // Configure for male voice
            configureForMaleVoice(utterance);
            
            // Speak with appropriate timing
            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
                console.log('Speaking with phonemic approach');
            }, 100);
        }
        
        // Get proper phonetic representation for a blend
        function getPhoneticRepresentation(blend) {
            // Pre-process the blend for better pronunciation
            const cleanBlend = blend.trim();
            
            // Log what we're trying to pronounce
            console.log(`Getting pronunciation for: "${cleanBlend}"`);
            
            // Handle special cases for improved pronunciation
            const overrides = {
                // Short vowel overrides - two-letter blends with compact pronunciation (no spelling)
                'bă': 'bat',
                'că': 'cat',
                'dă': 'dad',
                'fă': 'fat',
                'gă': 'gal',
                'hă': 'hat',
                'jă': 'jam',
                'kă': 'kat',
                'lă': 'lab',
                'mă': 'mat',
                'nă': 'nap',
                'pă': 'pat',
                'ră': 'rat',
                'să': 'sat',
                'tă': 'tap',
                'vă': 'van',
                'wă': 'wham',
                'yă': 'yap',
                'ză': 'zap',
                
                'bĕ': 'bed',
                'cĕ': 'said',
                'dĕ': 'dead',
                'fĕ': 'fetch', // Changed to 'fetch' to fix letter-by-letter pronunciation
                'gĕ': 'jet',
                'hĕ': 'hen',
                'jĕ': 'jet',
                'kĕ': 'ken',
                'lĕ': 'let',
                'mĕ': 'men',
                'nĕ': 'net',
                'pĕ': 'pet',
                'rĕ': 'rep', // Changed to 'rep' to fix letter-by-letter pronunciation // Changed to ret as requested
                'sĕ': 'set',
                'tĕ': 'ten',
                'vĕ': 'vet',
                'wĕ': 'wet',
                'yĕ': 'yet',
                'zĕ': 'zen',
                
                'bĭ': 'bit',
                'cĭ': 'sit',
                'dĭ': 'did',
                'fĭ': 'fit',
                'gĭ': 'jit',  // Changed to jit as requested
                'hĭ': 'hit',
                'jĭ': 'jig',
                'kĭ': 'kit',
                'lĭ': 'lit',
                'mĭ': 'mit',
                'nĭ': 'nip',
                'pĭ': 'pit',
                'rĭ': 'rip',  // Changed to rip for proper blend sound
                'sĭ': 'sit',
                'tĭ': 'tip',
                'vĭ': 'vit', // Using 'vit' for Short I
                'wĭ': 'win',
                'yĭ': 'yip',
                'zĭ': 'zip',
                
                'bŏ': 'bot',
                'cŏ': 'cot',
                'dŏ': 'dot',
                'fŏ': 'fought',
                'gŏ': 'got',
                'hŏ': 'hot',
                'jŏ': 'job',
                'kŏ': 'cot',
                'lŏ': 'lot',
                'mŏ': 'mop',
                'nŏ': 'not',
                'pŏ': 'pot',
                'rŏ': 'rot',
                'sŏ': 'sob',
                'tŏ': 'top',
                'vŏ': 'fought',
                'wŏ': 'wok',
                'yŏ': 'yot',
                'zŏ': 'zom',
                
                'bŭ': 'buh',    // Changed from 'but' to 'buh' for consistent Short U sound
                'cŭ': 'cut',    // Changed back to 'cut' as requested
                'dŭ': 'duh',    // Changed from 'dug' to 'duh' for consistent Short U sound
                'fŭ': 'fuh',    // Changed from 'fun' to 'fuh' for consistent Short U sound
                'gŭ': 'gut',    // Changed back to 'gut' as requested
                'hŭ': 'huh',    // Changed from 'hut' to 'huh' for consistent Short U sound
                'jŭ': 'jut',    // Changed from 'jug' to 'jut' as requested
                'kŭ': 'kuh',    // Changed from 'cut' to 'kuh' for consistent Short U sound
                'lŭ': 'lut',    // Changed from 'luh' to 'lut' as requested
                'mŭ': 'muh',    // Changed from 'mud' to 'muh' for consistent Short U sound
                'nŭ': 'nuh',    // Changed from 'nudge' to 'nuh' for consistent Short U sound
                'pŭ': 'puh',    // Changed from 'pup' to 'puh' for consistent Short U sound
                'rŭ': 'rut',    // Changed from 'ruh' to 'rut' as requested
                'sŭ': 'sut',    // Changed from 'suh' to 'sut' as requested
                'tŭ': 'tuh',    // Changed from 'tug' to 'tuh' for consistent Short U sound
                'vŭ': 'vuh',    // Changed from 'vut' to 'vuh' for consistent Short U sound
                'wŭ': 'wuh',    // Changed from 'what' to 'wuh' for consistent Short U sound
                'yŭ': 'yuh',    // Changed from 'yum' to 'yuh' for consistent Short U sound
                'zŭ': 'zut',    // Changed from 'zuh' to 'zut' as requested
                
                // Problematic blends that need more distinct pronunciation
                'shā': 'shay',
                'shē': 'shee',
                'shī': 'sheye',
                'shō': 'show',
                'shū': 'shoo',
                'shă': 'shah',
                'shĕ': 'shelf',
                'shĭ': 'shi',
                'shŏ': 'sho',
                'shŭ': 'shu',
                // Special handling for the 'qu' sound since it's unique
                'qă': 'quah',
                
                // Long vowel sounds - Long A
                'bā': 'bay',
                'cā': 'kay',
                'dā': 'day',
                'fā': 'fay',
                'gā': 'gay',
                'hā': 'hay',
                'jā': 'jay',
                'kā': 'kay',
                'lā': 'lay',
                'mā': 'may',
                'nā': 'nay',
                'pā': 'pay',
                'rā': 'ray',
                'sā': 'say',
                'tā': 'tay',
                'vā': 'vay',
                'wā': 'way',
                'yā': 'yay',
                'zā': 'zay',
                
                // Long vowel sounds - Long E
                'bē': 'bee',
                'cē': 'see',
                'dē': 'dee',
                'fē': 'fee',
                'gē': 'gee',
                'hē': 'hee',
                'jē': 'jeep', // Updated to use 'jeep' for clarity
                'kē': 'kee',
                'lē': 'lee',
                'mē': 'mee',
                'nē': 'nee', // Fixed from 'na' to 'nee'
                'pē': 'pee',
                'rē': 'ree',
                'sē': 'see',
                'tē': 'tee',
                'vē': 'vee',
                'wē': 'wee',
                'yē': 'yee',
                'zē': 'zee',
                
                // Three letter overrides - comprehensive list
                // th- blends
                'thā': 'thay',
                'thē': 'thee',
                'thī': 'thigh',
                'thō': 'though',
                'thū': 'through', // Changed back to "through" as requested
                'thă': 'thah',
                'thĕ': 'then',
                'thĭ': 'thih',
                'thŏ': 'thoh',
                'thŭ': 'thuh',
                
                // qu- blends
                'quā': 'quake',
                'quē': 'quee',
                'quī': 'quite', // Using "quite" for clear Long I sound
                'quō': 'quo',
                'quū': 'queue', // Using "queue" for proper Long U sound
                'quă': 'quah',
                'quĕ': 'quest',
                'quĭ': 'quih',
                'quŏ': 'quoh',
                'quŭ': 'quuh',
                
                // wh- blends
                'whā': 'wait',
                'whē': 'whee',
                'whī': 'why',
                'whō': 'whoa',
                'whū': 'woo', // Changed from who to woo as requested
                'whă': 'whah',
                'whĕ': 'when',
                'whĭ': 'whih',
                'whŏ': 'whoh',
                'whŭ': 'whuh',
                
                // ph- blends
                'phā': 'fate',
                'phē': 'phee',
                'phī': 'phigh',
                'phō': 'pho',
                'phū': 'phew', // Using "phew" for proper Long U sound
                'phă': 'phah',
                'phĕ': 'phenom',
                'phĭ': 'phih',
                'phŏ': 'phoh',
                'phŭ': 'phuh',
                
                // bl- blends
                'blā': 'blay',
                'blē': 'blee',
                'blī': 'bligh',
                'blō': 'bloh',
                'blū': 'blue', // Using "blue" for proper Long U sound
                'blă': 'black', // Using "black" for proper Short A sound
                'blĕ': 'blend',
                'blĭ': 'blih',
                'blŏ': 'bloh',
                'blŭ': 'room',
                
                // cl- blends
                'clā': 'clay',
                'clē': 'clee',
                'clī': 'cligh',
                'clō': 'cloh', // Using "cloh" for proper Long O sound
                'clū': 'clue', // Using "clue" for proper Long U sound
                'clă': 'clah',
                'clĕ': 'clef',
                'clĭ': 'clih',
                'clŏ': 'cloh',
                'clŭ': 'cluh',
                
                // fl- blends
                'flā': 'flay',
                'flē': 'flee',
                'flī': 'fligh',
                'flō': 'flow', // Changed from floh to flow as requested
                'flū': 'flute', // Using "flute" for proper Long U sound
                'flă': 'flah',
                'flĕ': 'flesh',
                'flĭ': 'flih',
                'flŏ': 'floh',
                'flŭ': 'fluh',
                
                // gl- blends
                'glā': 'glay',
                'glē': 'glee',
                'glī': 'gligh',
                'glō': 'gloh',
                'glū': 'glue', // Using "glue" for proper Long U sound
                'glă': 'glah',
                'glĕ': 'glen',
                'glĭ': 'glih',
                'glŏ': 'gloh',
                'glŭ': 'gluh',
                
                // pl- blends
                'plā': 'play',
                'plē': 'plea',
                'plī': 'pligh',
                'plō': 'ploh', // Using "ploh" for proper Long O sound
                'plū': 'plume', // Using "plume" for proper Long U sound
                'plă': 'plah',
                'plĕ': 'pledge',
                'plĭ': 'plih',
                'plŏ': 'ploh',
                'plŭ': 'pluh',
                
                // sl- blends
                'slā': 'slay',
                'slē': 'slee',
                'slī': 'sligh',
                'slō': 'sloh',
                'slū': 'sloop', // Using "sloop" for proper Long U sound
                'slă': 'slat', // Using "slat" for proper Short A sound
                'slĕ': 'sled',
                'slĭ': 'slih',
                'slŏ': 'sloh',
                'slŭ': 'sluh',
                
                // br- blends
                'brā': 'bray',
                'brē': 'bree',
                'brī': 'brigh',
                'brō': 'broh', // Using "broh" for proper Long O sound
                'brū': 'brew', // Using "brew" for proper Long U sound
                'bră': 'brat', // Using "brat" for proper Short A sound
                'brĕ': 'bread',
                'brĭ': 'brih',
                'brŏ': 'broh',
                'brŭ': 'bruh',
                
                // cr- blends
                'crā': 'cray',
                'crē': 'cree',
                'crī': 'crigh',
                'crō': 'croh',
                'crū': 'crew', // Using "crew" for proper Long U sound
                'cră': 'crah',
                'crĕ': 'crest',
                'crĭ': 'crih',
                'crŏ': 'croh',
                'crŭ': 'cruh',
                
                // dr- blends
                'drā': 'dray',
                'drē': 'dree',
                'drī': 'drigh',
                'drō': 'droh', // Using "droh" for proper Long O sound
                'drū': 'drew', // Using "drew" for proper Long U sound
                'dră': 'drah',
                'drĕ': 'dread',
                'drĭ': 'drih',
                'drŏ': 'droh',
                'drŭ': 'druh',
                
                // fr- blends
                'frā': 'fray',
                'frē': 'free',
                'frī': 'frigh',
                'frō': 'froh', // Using "froh" for proper Long O sound
                'frū': 'fruit', // Using "fruit" for proper Long U sound
                'fră': 'frah',
                'frĕ': 'fresh',
                'frĭ': 'frih',
                'frŏ': 'froh',
                'frŭ': 'fruh',
                
                // gr- blends
                'grā': 'gray',
                'grē': 'gree',
                'grī': 'grigh',
                'grō': 'groh', // Using "groh" for proper Long O sound
                'grū': 'grew', // Using "grew" for proper Long U sound
                'gră': 'grah',
                'grĕ': 'great',
                'grĭ': 'grih',
                'grŏ': 'groh',
                'grŭ': 'gruh',
                
                // pr- blends
                'prā': 'pray',
                'prē': 'pree',
                'prī': 'prigh',
                'prō': 'proh', // Using "proh" for proper Long O sound
                'prū': 'prune', // Using "prune" for proper Long U sound
                'pră': 'prah',
                'prĕ': 'press',
                'prĭ': 'prih',
                'prŏ': 'proh',
                'prŭ': 'pruh',
                
                // tr- blends
                'trā': 'tray',
                'trē': 'tree',
                'trī': 'trigh',
                'trō': 'troh', // Using "troh" for proper Long O sound
                'trū': 'true', // Using "true" for proper Long U sound
                'tră': 'trah',
                'trĕ': 'tread',
                'trĭ': 'trih',
                'trŏ': 'troh',
                'trŭ': 'truh',
                
                // ch- blends (with distinct pronunciation from sh-)
                'chā': 'chay',
                'chē': 'chee',
                'chī': 'chime',  // Using "chime" with clear 'ch' sound
                'chō': 'chote', // Changed from choh to chote as requested
                'chū': 'chew', // Using "chew" for proper Long U sound
                'chă': 'chat', // Using "chat" for proper Short A sound
                'chĕ': 'check',
                'chĭ': 'chih',
                'chŏ': 'choh',
                'chŭ': 'chuh',
                
                // sh- blends
                'shā': 'shay',
                'shē': 'she',
                'shī': 'shigh',
                'shō': 'shoh',
                'shū': 'shoe',
                'shă': 'shack', // Using "shack" for proper Short A sound
                'shĕ': 'sheh',
                'shĭ': 'shih',
                'shŏ': 'shoh',
                'shŭ': 'shuh',
                
                // Additional common trigraphs with proper short A sounds
                'scă': 'scan', // Using "scan" for proper Short A sound
                'stă': 'stack', // Using "stack" for proper Short A sound
                'smă': 'smack', // Using "smack" for proper Short A sound
                'snă': 'snap', // Using "snap" for proper Short A sound
                'swă': 'swam', // Using "swam" for proper Short A sound
                'twă': 'tan', // Using "tan" for proper Short A sound
                
                // Additional Long I trigraphs
                'scī': 'sigh',  // Using "sigh" for sci sound
                'stī': 'stigh',
                'smī': 'smigh',
                'snī': 'snigh',
                'swī': 'swigh',
                'twī': 'twigh',
                
                // Additional Long O trigraphs
                'scō': 'scoh',  // Using "scoh" for proper Long O sound
                'stō': 'stow',  // Changed from stoh to stow as requested
                'smō': 'smoh',  // Using "smoh" for proper Long O sound
                'snō': 'snow',  // Using "snow" for proper Long O sound
                'swō': 'swoh',  // Using "swoh" for proper Long O sound
                'twō': 'twoh',  // Using "twoh" for proper Long O sound
                
                // Additional Long U trigraphs
                'scū': 'scoot',  // Using "scoot" for proper Long U sound
                'stū': 'stew',  // Using "stew" for proper Long U sound
                'smū': 'smooth',  // Using "smooth" for proper Long U sound
                'snū': 'snooze',  // Changed back to "snooze" as requested
                'swū': 'swoon',  // Changed back to "swoon" as requested
                'twū': 'too',  // Using "too" for proper Long U sound
                'thū': 'through',  // Changed back to "through" as requested
                'quū': 'queue',  // Using "queue" for proper Long U sound
                
                // th- blends with proper short vowel pronunciations
                'thă': 'that', // Using "that" for proper Short A sound
                'thĕ': 'then', // Using "then" for proper Short E sound
                'thĭ': 'this', // Using "this" for proper Short I sound
                'thŏ': 'thot', // Using "thot" for proper Short O sound
                'thŭ': 'thud', // Using "thud" for proper Short U sound
                
                // ph- blends with proper short vowel pronunciations
                'phă': 'phat', // Using "phat" for proper Short A sound
                'phĕ': 'fetch', // Using "fetch" for proper Short E sound as requested
                'phĭ': 'phil', // Using "phil" for proper Short I sound
                'phŏ': 'phon', // Using "phon" (as in phonics) for proper Short O sound
                'phŭ': 'phun', // Using "phun" for proper Short U sound
                
                // wh- blends with proper short vowel pronunciations
                'whă': 'whack', // Using "whack" for proper Short A sound
                'whĕ': 'when', // Using "when" for proper Short E sound
                'whĭ': 'whip', // Using "whip" for proper Short I sound
                'whŏ': 'what', // Using "what" for proper Short O sound (approximate)
                'whŭ': 'what', // Using "what" for proper Short U sound as requested
                
                // qu- blends with proper short vowel pronunciations
                'quă': 'quack', // Using "quack" for proper Short A sound
                'quĕ': 'quest', // Using "quest" for proper Short E sound
                'quĭ': 'quick', // Using "quick" for proper Short I sound
                'quŏ': 'quad', // Using "quad" for proper Short O sound
                'quŭ': 'quup', // Using "quup" as approximation for Short U sound
                
                // Other trigraphs with short vowel sounds - using short vowel template words
                'scĕ': 'scent',  // Using "scent" for proper Short E sound
                'scĭ': 'scip',  // Using approximation for proper Short I sound
                'scŏ': 'scoff', // Using "scoff" for proper Short O sound
                'scŭ': 'scuff', // Using "scuff" for proper Short U sound
                'stĕ': 'step',   // Using "step" for proper Short E sound
                'stĭ': 'stick',  // Using "stick" for proper Short I sound
                'stŏ': 'stop',   // Using "stop" for proper Short O sound
                'stŭ': 'stuff',  // Using "stuff" for proper Short U sound
                'smĕ': 'smell',  // Using "smell" for proper Short E sound
                'smĭ': 'smith',  // Using "smith" for proper Short I sound
                'smŏ': 'smock',  // Using "smock" for proper Short O sound
                'smŭ': 'smug',   // Using "smug" for proper Short U sound
                'snĕ': 'snell',  // Using "snell" for proper Short E sound
                'snĭ': 'sniff',  // Using "sniff" for proper Short I sound
                'snŏ': 'snot',   // Using "snot" for proper Short O sound
                'snŭ': 'snub',  // Using "snub" for proper Short U sound as requested
                'swĕ': 'swell',  // Using "swell" for proper Short E sound
                'swĭ': 'swift',  // Using "swift" for proper Short I sound
                'swŏ': 'swosh',  // Using approximation for proper Short O sound
                'swŭ': 'swum',   // Using "swum" for proper Short U sound
                'twĕ': 'ten', // Using "ten" for proper Short E sound as requested
                'twĭ': 'twig',   // Using "twig" for proper Short I sound
                'twŏ': 'twock',  // Using approximation for proper Short O sound
                'twŭ': 'twump'   // Using approximation for proper Short U sound
            };
            
            // Check if there's an override for this blend
            if (overrides[cleanBlend]) {
                const result = overrides[cleanBlend];
                console.log(`Found override for "${cleanBlend}": "${result}"`);
                return result;
            }
            
            // Generic rules for pronunciation with additional spacing for clarity
            // Handle long vowels
            if (cleanBlend.includes('ā')) {
                const result = cleanBlend.replace('ā', 'ay');
                console.log(`Long A vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ē')) {
                const result = cleanBlend.replace('ē', 'ee');
                console.log(`Long E vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ī')) {
                const result = cleanBlend.replace('ī', 'eye');
                console.log(`Long I vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ō')) {
                const result = cleanBlend.replace('ō', 'oh');
                console.log(`Long O vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ū')) {
                const result = cleanBlend.replace('ū', 'ue');
                console.log(`Long U vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            }
            
            // Handle short vowels with simplified phonetic representation
            if (cleanBlend.includes('ă')) {
                // Short 'a''cat'
                let consonant = cleanBlend.replace('ă', '');
                const result = consonant + 'a';
                console.log(`Short A vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ĕ')) {
                // Short 'e''bet'
                let consonant = cleanBlend.replace('ĕ', '');
                const result = consonant + 'e';
                console.log(`Short E vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ĭ')) {
                // Short 'i''bit'
                let consonant = cleanBlend.replace('ĭ', '');
                const result = consonant + 'i';
                console.log(`Short I vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ŏ')) {
                // Short 'o''hot'
                let consonant = cleanBlend.replace('ŏ', '');
                const result = consonant + 'o';
                console.log(`Short O vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            } else if (cleanBlend.includes('ŭ')) {
                // Short 'u''but'
                let consonant = cleanBlend.replace('ŭ', '');
                const result = consonant + 'u';
                console.log(`Short U vowel in "${cleanBlend}" -> "${result}"`);
                return result;
            }
            
            // Default - just return the blend as is without spacing
            console.log(`No special handling for "${cleanBlend}", using as is`);
            return cleanBlend;
        }
        
        // Utility function to shuffle an array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
    
    <!-- Script to ensure the correct font sizes are applied -->
    <script>
        // Wait for the DOM to be fully loaded and the charts to be rendered
        document.addEventListener('DOMContentLoaded', function() {
            // Log that we're keeping the font sizes specified in CSS
            console.log("Using CSS-defined font sizes for blend cells");
            console.log("Two-letter blends: 36px desktop, 28px mobile");
            console.log("Three-letter blends: 32px desktop, 24px mobile");
            
            // Setup Decoding Blends Charts Button
            const magicChartsBtn = document.getElementById('magic-charts-btn');
            const chartsArea = document.getElementById('charts-area');
            
            if (magicChartsBtn && chartsArea) {
                console.log('Setting up Decoding Blends Charts button');
                
                magicChartsBtn.addEventListener('click', function() {
                    if (chartsArea.style.display === 'none') {
                        // Show charts with fade-in effect
                        chartsArea.style.opacity = '0';
                        chartsArea.style.display = 'block';
                        
                        // Animate fade-in
                        setTimeout(() => {
                            chartsArea.style.transition = 'opacity 0.8s ease-in-out';
                            chartsArea.style.opacity = '1';
                            
                            // Scroll to charts area
                            chartsArea.scrollIntoView({behavior: 'smooth', block: 'start'});
                        }, 50);
                        
                        // Update button text
                        magicChartsBtn.querySelector('span').textContent = 'Hide Decoding Blends Charts';
                        
                        // Add a subtle sparkle animation to the button
                        magicChartsBtn.style.animation = 'none';
                        setTimeout(() => {
                            magicChartsBtn.style.animation = 'glow 2s infinite alternate';
                        }, 10);
                    } else {
                        // Hide charts with fade-out
                        chartsArea.style.transition = 'opacity 0.5s ease-in-out';
                        chartsArea.style.opacity = '0';
                        
                        setTimeout(() => {
                            chartsArea.style.display = 'none';
                            
                            // Reset button text
                            magicChartsBtn.querySelector('span').textContent = 'Decoding Blends Charts';
                            
                            // Scroll to button
                            magicChartsBtn.scrollIntoView({behavior: 'smooth', block: 'center'});
                        }, 500);
                    }
                });
                
                // Add a subtle animation to attract attention to the button initially
                setTimeout(() => {
                    magicChartsBtn.classList.add('pulse');
                    setTimeout(() => {
                        magicChartsBtn.classList.remove('pulse');
                    }, 1500);
                }, 1000);
            }
        });
        
        // Benefits Toggle Button Functionality
        const benefitsButton = document.getElementById('benefits-button');
        const benefitsContent = document.getElementById('benefits-content');
        
        if (benefitsButton && benefitsContent) {
            benefitsButton.addEventListener('click', function() {
                if (benefitsContent.style.display === 'none') {
                    benefitsContent.style.display = 'block';
                    benefitsButton.classList.add('active');
                } else {
                    benefitsContent.style.display = 'none';
                    benefitsButton.classList.remove('active');
                }
            });
        }
        
        // Decoding Blends Charts Effectiveness Toggle Functionality
        const effectivenessButton = document.getElementById('effectiveness-button');
        const effectivenessContent = document.getElementById('effectiveness-content');
        
        if (effectivenessButton && effectivenessContent) {
            effectivenessButton.addEventListener('click', function() {
                if (effectivenessContent.style.display === 'none') {
                    effectivenessContent.style.display = 'block';
                    effectivenessButton.classList.add('active');
                } else {
                    effectivenessContent.style.display = 'none';
                    effectivenessButton.classList.remove('active');
                }
            });
        }
        
        // Navigation Toggle Functionality
        const navigationButton = document.getElementById('navigation-button');
        const navigationContent = document.getElementById('navigation-content');
        
        if (navigationButton && navigationContent) {
            navigationButton.addEventListener('click', function() {
                if (navigationContent.style.display === 'none') {
                    navigationContent.style.display = 'block';
                    navigationButton.classList.add('active');
                } else {
                    navigationContent.style.display = 'none';
                    navigationButton.classList.remove('active');
                }
            });
        }
        
        // Maximum Benefit Toggle Functionality
        const maximumBenefitButton = document.getElementById('maximum-benefit-button');
        const maximumBenefitContent = document.getElementById('maximum-benefit-content');
        
        if (maximumBenefitButton && maximumBenefitContent) {
            maximumBenefitButton.addEventListener('click', function() {
                if (maximumBenefitContent.style.display === 'none') {
                    maximumBenefitContent.style.display = 'block';
                    maximumBenefitButton.classList.add('active');
                } else {
                    maximumBenefitContent.style.display = 'none';
                    maximumBenefitButton.classList.remove('active');
                }
            });
        }
    
        // Direct pronunciation overrides - this ensures our customizations are applied
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Applying final pronunciation overrides...");
            
            // Debug cell structure to understand how they're defined
            const allCells = document.querySelectorAll('td');
            console.log(`Found ${allCells.length} total cells in tables`);
            
            // Print attributes of the first 5 cells to understand structure
            Array.from(allCells).slice(0, 5).forEach((cell, i) => {
                console.log(`Cell ${i} properties:`, {
                    classes: cell.className,
                    id: cell.id,
                    attributes: Array.from(cell.attributes).map(attr => `${attr.name}="${attr.value}"`).join(', '),
                    innerHTML: cell.innerHTML.substring(0, 50) + (cell.innerHTML.length > 50 ? '...' : '')
                });
            });
            
            // Look for specific blend cells we want to modify
            ['gĭ', 'rĭ', 'fĕ', 'gĕ', 'rĕ', 'fō', 'kō', 'wū', 'gī', 'vī'].forEach(blend => {
                console.log(`Searching for elements containing text "${blend}"...`);
                document.querySelectorAll('td').forEach(cell => {
                    if (cell.textContent.includes(blend)) {
                        console.log(`Found cell containing "${blend}":`, {
                            classes: cell.className,
                            id: cell.id,
                            attributes: Array.from(cell.attributes).map(attr => `${attr.name}="${attr.value}"`).join(', '),
                            text: cell.textContent
                        });
                    }
                });
            });
            
            // Override function for specific blends
            const overrideBlendPronunciation = function(blend, pronunciation) {
                // Create an override function for this specific blend
                window[`speak_${blend}`] = function() {
                    console.log(`OVERRIDE: Speaking custom pronunciation for ${blend}: "${pronunciation}"`);
                    const utterance = new SpeechSynthesisUtterance(pronunciation);
                    utterance.rate = 0.8;
                    
                    // Adding special handling for letter-by-letter reading issues
                    if (blend === 'rĭ') {
                        // Setting specific speech parameters to prevent letter-by-letter reading
                        utterance.pitch = 1.1;
                        utterance.rate = 0.7;
                    }
                    else if (blend === 'fĕ') {
                        // Setting specific speech parameters to prevent letter-by-letter reading
                        utterance.pitch = 1.0;
                        utterance.rate = 0.75;
                    }
                    else if (blend === 'vī') {
                        // Setting specific speech parameters for long I sound in "vite"
                        utterance.pitch = 1.0;
                        utterance.rate = 0.65;
                        utterance.volume = 1.2; // Slightly louder for emphasis
                    }
                    
                    window.speechSynthesis.cancel(); // Clear queue
                    window.speechSynthesis.speak(utterance);
                };
                
                // Try multiple strategies to find the blend cells
                let elements = [];
                
                // Strategy 1: Look for data-blend attribute
                const dataBlendElements = document.querySelectorAll(`td[data-blend="${blend}"], .blend-cell[data-blend="${blend}"]`);
                elements = elements.concat(Array.from(dataBlendElements));
                
                // Strategy 2: Look for cells with exact text content
                document.querySelectorAll('td').forEach(cell => {
                    if (cell.textContent.trim() === blend) {
                        elements.push(cell);
                    }
                });
                
                // Strategy 3: Look for cells with blend in text content
                document.querySelectorAll('td').forEach(cell => {
                    if (cell.textContent.includes(blend) && !elements.includes(cell)) {
                        elements.push(cell);
                    }
                });
                
                // Strategy 4: Add click handlers to ALL cells and use filter at runtime
                document.querySelectorAll('td').forEach(cell => {
                    const originalOnClick = cell.onclick;
                    cell.onclick = function(event) {
                        // If this is the blend we're looking for, use our override
                        if (cell.textContent.includes(blend)) {
                            console.log(`Intercepted click on cell containing ${blend}, using override`);
                            window[`speak_${blend}`]();
                            event.stopPropagation();
                            return false;
                        }
                        // Otherwise, use the original handler
                        if (originalOnClick) {
                            return originalOnClick.call(this, event);
                        }
                    };
                });
                
                console.log(`Found ${elements.length} elements for blend "${blend}"`);
                
                // Apply direct override to found elements
                elements.forEach(cell => {
                    console.log(`Directly overriding click handler for ${blend} element:`, cell);
                    const originalOnClick = cell.onclick;
                    cell.onclick = function(event) {
                        console.log(`Executing override for ${blend}`);
                        window[`speak_${blend}`]();
                        event.stopPropagation();
                        return false;
                    };
                });
                
                // Also inject the pronunciation into the global map
                if (window.pronunciationOverrides) {
                    window.pronunciationOverrides[blend] = pronunciation;
                } else {
                    window.pronunciationOverrides = { [blend]: pronunciation };
                }
                
                // Hook into the original playBlendAudio function if it exists
                if (window.playBlendAudio) {
                    const originalPlayBlendAudio = window.playBlendAudio;
                    window.playBlendAudio = function(blend) {
                        if (window.pronunciationOverrides && window.pronunciationOverrides[blend]) {
                            console.log(`Intercepted playBlendAudio call for ${blend}, using override`);
                            const utterance = new SpeechSynthesisUtterance(window.pronunciationOverrides[blend]);
                            utterance.rate = 0.8;
                            window.speechSynthesis.cancel();
                            window.speechSynthesis.speak(utterance);
                            return;
                        }
                        return originalPlayBlendAudio.call(this, blend);
                    };
                }
            };
            
            // Apply our specific overrides
            // Short I
            overrideBlendPronunciation('gĭ', 'jit');
            overrideBlendPronunciation('rĭ', 'rip');
            
            // Short E
            overrideBlendPronunciation('fĕ', 'fetch');
            overrideBlendPronunciation('gĕ', 'jet');
            overrideBlendPronunciation('rĕ', 'rep');
            
            // Long O
            overrideBlendPronunciation('fō', 'fote');
            overrideBlendPronunciation('kō', 'coat');
            
            // Long U
            overrideBlendPronunciation('wū', 'woot');
            
            // Long I
            overrideBlendPronunciation('gī', 'jive');
            overrideBlendPronunciation('vī', 'vipe'); // Changed to vipe for better pronunciation
            
            console.log("Final pronunciation overrides applied.");
        });
        // Add a verification function to initialize and test our pronunciation overrides
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Verifying pronunciation overrides...");
            
            // Verify the special handling for Short I blends
            console.log("Verifying Short I blends: gĭ→jit, rĭ→rip");
            
            // Verify the special handling for Short E blends
            console.log("Verifying Short E blends: fĕ→fetch, gĕ→jet, rĕ→ret");
            
            // Verify the special handling for Long O sounds
            console.log("Verifying Long O blends: fō→fote, kō→coat");
            
            // Verify the special handling for Long U sounds
            console.log("Verifying Long U blend: wū→woot");
            
            // Verify the special handling for Long I sounds
            console.log("Verifying Long I blends: gī→jive, vī→vipe");
            
            console.log("All pronunciation overrides verified!");
        });
    </script>
</body>
</html>